# AZ-500 Practice Test 139 Questions

---

## Q03X:

---

### Answer:

---

### References:

---

## Q032:

You are a Global Security Administrator for a Microsoft Entra tenant.
You need to delegate the creation and management of Azure Key vaults to your colleague administrator. You must adhere to the principle of least privilege.
Which Azure built-in role-based access control (RBAC) role should you assign to your colleague?

- Key Vault Reader
- Key Vault Administrator
- Security Admin
- Key Vault Contributor

---

### Answer:
- Key Vault Contributor

You should assign them the Key Vault Contributor role. This role manages data plane operations that provide permissions to manage Azure key vaults. It does not grant access to Azure key vault content, such as keys, secrets, and certificates. To be able to adhere to the principle of least privilege, you should only provide permissions to delegate the creation and management of Azure key vault resources, which makes Key Vault Contributor the right role for this scenario.
You should not assign them the Key Vault Reader role. This role provides permissions to read metadata of key vaults, certificates, keys, and secrets, but not to create and manage key vaults.
You should not assign them the Security Admin role. This role provides permissions to manage Microsoft 365 Defender, Microsoft Entra ID Protection, Microsoft Entra Authentication, Azure Information Protection, and the Office 365 Security & Compliance Center. These permissions are not required in the scenario and do not adhere to the principle of least privilege.
You should not assign them the Key Vault Administrator role. This role provides permissions to manage data plane operations on key vaults, certificates, keys, and secrets. This role does not allow you to manage, create or delete key vault resources or manage role assignments.

---

### References:

[Provide access to Key Vault keys, certificates, and secrets with an Azure role-based access control](https://learn.microsoft.com/en-us/azure/key-vault/general/rbac-guide?tabs=azure-cli)  


---

## Q031:


You are appointed to take over the role of a security administrator for an Azure tenant of Company1. You receive a complaint from User1, saying that they are not able to create a virtual machine (VM) in the tenant. Refer to the exhibit for details of the error message.
You have identified that the following custom role definition, Role1, is assigned to User1:

```
{
  "Name": "Role1",
  "IsCustom": true,
  "Description": "Rolel",
  "Actions": [
    "Microsoft.Compute/*",
    "Microsoft.Resources/subscriptions/resourceGroups/write",
    "Microsoft.Resources/subscriptions/resourceGroups/read",
    "Microsoft.Resources/deployments/*"
  ],
  "notActions": [],
  "dataActions": [],
  "notDataActions": [],
  "assignableScopes": [
    "/subscriptions/11111111-2222-3333-4444-555555555555",
    "/subscriptions/11111111-2222-3333-4444-555555555555/resourceGroups/az500rg"
  ]
}
```

You need to resolve the error, satisfying the principle of least privilege and causing the least amount of administrative effort.
Which step should you take to meet this requirement?

![image info](./Q31.PNG)


- Preconfigure the resource group named az500rg.
- Assign the Contributor role to User1 at the resource group level.
- Assign to the user the Virtual Machine Contributor role at the subscription level.
- Add the Microsoft.Network/*/write permission to the Actions section.

---

### Answer:
- Add the Microsoft.Network/*/write permission to the Actions section.

You should add the Microsoft.Network/*/write permission to the Actions section. If Azure built-in roles do not satisfy your needs, you can create custom roles and assign them to users via a procedure similar to the one used for built-in roles. With custom roles, you can limit the level of permissions to those that the user needs to perform their work. Providing only the level of permissions as required by the user to perform their work is called the principle of least privilege. To create a virtual machine (VM), User1 needs only Compute, Resourcegroups, and Network permissions. The custom role configuration can be defined in a JSON configuration file, in which you can use the Actions section to provide permissions and the notActions section to remove them. In User1's custom role definition, the Microsoft.Network/*/write permission is missing, which prevents the creation of a virtual LAN (VLAN) and network interface card (NIC). The solution of adding the Microsoft.Network/*/write line satisfies both requirements: the principle of least privilege and least administrative effort.
You should not assign the Contributor role to User1 at the resource group level. A Contributor role is an Azure built-in role which provides the permission to create resources at the resource group level and, as such, it provides a higher level of permissions than required. Although assigning the Contributor role at the resource group level would solve the error, it would not satisfy the principle of least privilege.
You should not preconfigure the resource group named az500rg. Preconfiguring the resource group cannot resolve the error, seeing as the Microsoft.Network/*/write permission is still missing in this case.
You should not assign to the user the Virtual Machine Contributor role at the subscription level. This Azure
built-in role allows the user to create and manage VMs. However, this role does not provide the permission
to manage a network, which is the main reason for the error in this scenario. This role would be useful if you
needed to provide permissions to an administrator to start/stop/reboot a VM or execute some other
administrative task on the VM. In this case, the requirement is to create a VM, which requires additional
permissions. This solution does not satisfy the requirement.


---

### References:

[Create or update Azure custom roles using Azure CLI](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles-cli)  

[Understand Azure role definitions](https://learn.microsoft.com/en-us/azure/role-based-access-control/role-definitions)   

[Azure custom roles](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)  

---

## Q030:

You are the administrator of a Microsoft Sentinel workspace in your company. You grant access to the following users in this workspace:

- UserA is a security manager who needs to view incidents in the workspace
- UserB is a security analyst who is responsible for managing analytics rules
- UserC is a level I support analyst who is responsible for responding to incidents
- UserD is a level II support analyst who needs to create automation playbooks

You need to assign the Microsoft Sentinel Contributor built-in role to the users who require it, based on their daily tasks and following the principle of least privilege.
Which two users should you assign this built-in role to? Each correct answer presents part of the solution.

- UserA
- UserB
- UserC
- UserD

---

### Answer:
- UserB
- UserD

You should assign the Microsoft Sentinel Contributor role to UserB and UserD. You should assign this role to users who need to create and edit workbooks, analytics rules, and other Microsoft Sentinel resources, as well as to those who need to manage incidents by assigning or dismissing them, and view Microsoft Sentinel resources. In addition to the Microsoft Sentinel Contributor, you need to assign the Logic App Contributor role to UserD in order to allow them to create automation playbooks.
You should not assign the Microsoft Sentinel Contributor role to UserA. You should assign this user the Microsoft Sentinel Reader role instead. This role has the permissions to view Microsoft Sentinel resources, such as incidents and workbooks.
You should not assign the Microsoft Sentinel Contributor role to UserC. You should assign this user the
Microsoft Sentinel Responder role instead, seeing as this role would give them permission to manage incidents by assigning or dismissing them. The role also contains all the permissions from the Microsoft Sentinel Reader role.


---

### References:

[Roles and permissions in Microsoft Sentinel](https://learn.microsoft.com/en-us/azure/sentinel/roles)  

---

## Q029:

Your company owns a Microsoft Entra tenant named myCompany.com. You create a subscription in the tenant named subscriptionA. The table below shows the users of the tenant, their roles defined in Microsoft Entra ID, and their role level for subscriptionA.

| Name  | Microsoft Entra role  | Subscription role |
|------ |-----------------------|-------------------|
| User1 | Application Developer | Owner             |       
| User2 | None                  | Contributor       |
| User3 | None                  | Security Admin    |
| User4 | Conditional Access Administrator | None   |

You have a resource group named resourcegroup1 in subscriptionA.
You need to understand how these role assignments affect the ability of users to perform tasks in resourcegroup1.
Which user or users can perform the actions specified in the answer area? To answer, select the appropriate options from the drop-down menus.

Options: 
User1
User1 and User2
User1 and User3
User1 and User2 and User3
User1 and User2 and User4


Users who can manage permissions for resourcegroup1.
User1

Users who can create virtual machines (VMs) in resourcegroup1.
User1 and User2

Users who can register applications in the tenant.
User1

---

### Answer:

Only User1 would be able to manage permissions on resourcegroup1. When using built-in roles, you have to be part of the Owner built-in role to manage permissions on resources in Azure. The Conditional Access Administrator, Contributor, and Security Admin roles do not have permissions to manage user access across Azure resources.
User1 and User2 would be able to create a VM in resourcegroup1. The Contributor role provides all permissions to manage resources in Azure, but it does not give you the ability to manage access control on resources. The Security Admin role does not have permission to create a virtual machine (VM) in Azure.
Only User1 can register applications in the tenant. To register applications at the tenant level, users must be assigned Microsoft Entra roles rather than subscription roles. The Application Developer role has the permissions required to register an application in the tenant. The Conditional Access Administrator role does not grant users the required permissions, it provides permissions to manage the configuration of conditional access to resources in Azure.

---

### References:

---

## Q028:

You need to configure periodic access reviews for your company for applications and groups. The access reviews should be routinely administered by the application teams. All team members for an application are part of the same Microsoft Entra group. The owner of the group is responsible for ensuring that access is removed when a team member changes roles.
You need to configure the access review users and reviewers section.
For each of the following statements, select Yes if the statement is true. Otherwise, select No.

| Statement                                                             | Yes  | No  |
|---|---|---|
| You should select Members of a group for the Users to review setting. | Yes  |     |
| You should select Guest users only for the Scope setting.             |      | No  |
| You should select Selected user(s) for the Select reviewers setting.  |      | No  |

---

### Answer:

You should select Members of a group for the Users to review setting. Since the application team members belong to a Microsoft Entra group, you can select the group that has to review their access.
You should not select Guest users only as the Scope. The requirements are to review all user access. The scope should be set to All users, to ensure that access for all users that belong to the group is reviewed.
You should not select Selected user(s) as the Reviewers. In this case, you want to make sure that the owner of the group is responsible for proper access for the application team. You should select Group owner(s) as the reviewers.

---

### References:

[Plan a Microsoft Entra access reviews deployment](https://learn.microsoft.com/en-us/entra/id-governance/deploy-access-reviews)  

[Create an access review of groups and applications in Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/id-governance/create-access-review)  

[Review access to groups and applications in access reviews](https://learn.microsoft.com/en-us/entra/id-governance/perform-access-review)  

[Review access for yourself to groups or applications in access reviews](https://learn.microsoft.com/en-us/entra/id-governance/review-your-access)  


---

## Q027:

Your company wants to regularly review Microsoft Entra group membership. All users have been assigned a Microsoft Entra ID P1 license.
You need to create a new access review for all users in the marketing group. The access review needs to be performed by the group owner every week.
Which four actions should you perform in sequence? To answer, move the appropriate actions from the list of possible actions to the answer area and arrange them in the correct order.

- Specify the recurrence of the review.
- Assign all users a Microsoft Entra ID P2 license.
- Scope the access review users to All users.
- Assign the marketing group owner a Microsoft Entra ID P2 license.
- Scope access review users to guests only.
- Select the marketing group for access review.
- Assign a Microsoft Entra ID P2 license to the marketing group.
- Create a one-time access review.


---

### Answer:
- Assign the marketing group owner a Microsoft Entra ID P2 license.
- Select the marketing group for access review.
- Scope the access review users to All users.
- Specify the recurrence of the review.

First, you should assign the marketing group owner a Microsoft Entra ID P2 license. To perform a review in this scenario, only the group owner requires a Microsoft Entra ID P2 license.
Next, you should select the marketing group for access review. This will configure a new access review for members of the marketing group as is stated by the requirements.
Then, you should scope the access review users to All users. This will perform access reviews on all members of the marketing group, not only guest users.
Finally, you should specify the recurrence of the review. You specify the recurrence of the review by changing the frequency setting to one time, weekly, monthly, quarterly, semi-annually or annually. You should select weekly frequency for this access review, following the requirements.
You should not create a one-time access review. In this scenario you need to perform a weekly access review in the marketing group.
You should not scope the access review users to guests only. All users that are members of the marketing team need to have their access reviewed, not guest users only, as is stated in the requirements.
You should not assign all users a Microsoft Entra ID P2 license. This is not required. Only the group owner requires the license.
You should not assign a Microsoft Entra ID P2 license to the marketing group. By assigning a Microsoft Entra ID P2 license to the marketing group, all members of the group will automatically be assigned the license, which is not required.

---

### References:

[Create an access review of groups and applications in Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/id-governance/create-access-review) 

---

## Q026:

All IT staff in your company are members of the Global Administrators role. All users are assigned a Microsoft Entra ID P1 license.
You are requested to minimize the number of administrators being able to access to secure resources by providing users just-in-time privileged access. You also have to be able to oversee what those users are doing with their privileged access.
You need to activate Privileged Identity Management (PIM) while keeping costs to a minimum.

Which two actions should you perform? Each correct answer presents part of the solution.

- Consent to PIM by using the Azure portal with any Global Administrator role assigned.
- Assign Microsoft Entra ID P2 licenses to all users.
- Visit Privileged Identity Management configuration page in Azure portal.
- Assign Microsoft Entra ID P2 licenses to the IT staff.

---

### Answer:
- Visit Privileged Identity Management configuration page in Azure portal.
- Assign Microsoft Entra ID P2 licenses to the IT staff.

You should first assign a Microsoft Entra ID P2 license to the IT staff and then visit the Privileged Identity Management (PIM) configuration page in the Azure portal. To implement PIM, you must be active in a privileged role in a Microsoft Entra organization (e.g., be member of the Global Administrators role as in this scenario) and you must have a Microsoft Entra ID P2 license assigned. Once you are logged into the portal, you should search for the PIM service and open the configuration page once. Navigating to the PIM service by user with the Global Administrator role and Microsoft Entra ID P2 license assigned triggers automatic activation of PIM for the organization.
You should not assign Microsoft Entra ID P2 licenses to all users. This is not requested in this scenario and would not be cost-effective.
You should not consent to PIM via the Azure portal with any Global Administrator role assigned. The scenario states that all users, including those with Global Administrator role, are assigned a Microsoft Entra ID P1 license. To be able to activate PIM for the organization a user must be active in a privileged role in an Microsoft Entra ID (e.g., be a member of Global Administrators role) and have a Microsoft Entra ID P2 license assigned. Being Global Administrator only is not enough to activate PIM for the organization.

---

### References:

[Start using Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-getting-started)  

---

## Q025:

You manage an Azure account with a subscription named Sub1 for your company. Sub1 has three Azure virtual machines (VMs) named SERVER01, SERVERO2, and SERVER03.
SERVER01 and SERVERO2 are used by the sales team, and SERVERO3 is used by the development team. All servers are in a resource group named RG1 in Sub1.
The development team regularly makes changes to SERVERO3, including adding memory and additional storage. The team also needs the ability to create new VMs in the future.
You need to limit access to the development team and perform the necessary tasks using the least privilege model. The solution should not increase the administrative effort required to maintain the Azure account.
Which three actions should you perform? To answer, move the appropriate actions from the list of possible actions to the answer area and arrange them in any order.


- Create a new resource group named RG2.
- Assign the development team the Virtual Machine Contributor role, scoped to RG2.
- Assign the development team the Virtual Machine Contributor role, scoped to Sub2.
- Create a new subscription named Sub2.
- Assign the development team the Virtual Machine Contributor role, scoped to Sub1.
- Move SERVER03 to Sub2.
- Move SERVER03 to RG2.

---

### Answer:

- Create a new resource group named RG2.
- Assign the development team the Virtual Machine Contributor role, scoped to RG2.
- Move SERVER03 to RG2.

Access to objects in Azure is controlled via role-based access control (RBAC). When configuring access to objects, roles are assigned to resources. A role consists of three elements:
• A security principal the development team user account
• A role definition - Virtual Machine Contributor
• A scope - the resource group
You can specify a scope at multiple levels: management group, subscription, resource group, or resource. Scopes are structured in a parent-child relationship. Therefore, in this example, the development team will have access to all objects in the new resource group. They will also be able to create new VMs in the resource group in the future, as per the requirements.
You should not create a new subscription named Sub2, assign the development team the Virtual Machine Contributor role, scoped to Sub2, and move SERVERO3 to it. This would limit the development team's access to performing the required tasks in Sub2 only. However, managing an Azure account with multiple subscriptions involves more administrative effort compared to an account with a single subscription.
You should not assign the development team the Virtual Machine Contributors role, scoped to Sub1. If you assigned them the Virtual Machine Contributors role and scoped it to the existing subscription, you would grant them full access to all resources within the subscription. This is more access than is required for the development team.

---

### References:

[What is Azure role-based access control (Azure RBAC)?](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview)  

[Automate resource management governance](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/govern/enforce-cloud-governance-policies#automate-resource-management-governance)   
 
---

## Q024:

You work for a pharmaceutical company that regularly runs clinical trials on new drugs in development. Each new trial is worked on by several different teams who use a dedicated Azure enterprise application to enter result data.
When a trial starts, a new enterprise application is created and access is granted to the application via Microsoft Entra groups.
Your company decides to implement access reviews to streamline the process and shorten the time needed to set up new clinical trials. All users are already assigned an Office 365 E3 license.
You need to enable and configure an access review for a new Azure enterprise application. You should also ensure that costs are kept to a minimum.

What should you do?


- Assign all users an Office 365 E5 license. Then select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy.

- Create a Conditional Access policy and assign the policy to the new enterprise application. Link the Conditional Access policy to a new access review.

- Assign all users a Microsoft Entra ID P2 license. Then select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy.

- In the Azure portal, select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy.

---

### Answer:

- Assign all users a Microsoft Entra ID P2 license. Then select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy.

You should first assign all users a Microsoft Entra ID P2 license. You should then select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy. A Microsoft Entra ID P2 license is required for access reviews.
You should not assign all users an Office 365 E5 license, then select the Microsoft Entra ID blade, select Identity Governance, and configure an access review policy. The license would include additional enterprise features that cost more and are not required to implement the solution. This scenario requests to keep the costs to a minimum. All you would need is a Microsoft Entra ID P2 license for access reviews.
You should not create a Conditional Access policy, assign the policy to the new enterprise application, and link the Conditional Access policy to a new access review. Conditional Access is a technology that is used to make decisions and enforce corporate organizational policies when accessing corporate resources.

---

### References:

[What are access reviews?](https://learn.microsoft.com/en-us/entra/id-governance/access-reviews-overview)  

[What is Conditional Access?](https://learn.microsoft.com/en-us/entra/identity/conditional-access/overview)  

[Find the right Microsoft 365 enterprise plan for your organization](https://www.microsoft.com/en-us/microsoft-365/enterprise/microsoft365-plans-and-pricing)  

[Microsoft Entra Plans & Pricing](https://www.microsoft.com/en-us/security/business/microsoft-entra-pricing?market=it)   

---

## Q023:

Your company uses a centralized system for payroll and expense payments. The payroll system is secured by Microsoft Entra groups, and access is delegated to two groups: the Payroll Administrators group grants access to payroll data, and the Expense Administrators group grants access to expense data.
When a new payroll user is created, access is requested by the user's line manager. In the past, access to payroll data was incorrectly granted to new users. The mistake is sometimes rectified months after the creation of the new account.
You need to implement a solution allowing the payroll manager to check and remediate access to the payroll data on a regular basis.

What should you do?


- Create an access review with a monthly frequency for the Payroll Administrators group. Select the payroll manager as the reviewer.

- Create an Azure function that sends an e-mail to the payroll manager whenever a new user is added to the Payroll Administrators group.

- Change the group owner of the Payroll Administrators group to the payroll manager.

- Create a scheduled task to use the Get-ADGroupMember cmdlet and send the Payroll Administrators group members to the payroll manager.

---

### Answer:
- Create an access review with a monthly frequency for the Payroll Administrators group. Select the payroll manager as the reviewer.


You should create an access review with a monthly frequency for the Payroll Administrators group and select the payroll manager as the reviewer. Access reviews can be created as either a one-off review or they can be performed on a schedule. The aim of an access review is to allow specific users, in this case the payroll manager, to review group members based on their requirements. The payroll manager will see all the group members and can approve or deny members of the group via the access review. Any denied users will be removed from the group.
You should not create a scheduled task to use the Get-ADGroup Member cmdlet and send the Payroll Administrators group members to the payroll manager. The Get-ADGroupMember command retrieves a list of group members, which can be exported to CSV. However, you cannot modify group membership via the Get-ADGroupMember cmdlet.
You should not create an Azure function to send an email to the payroll manager whenever a new user is added to the Payroll Administrators group. Although this will inform the payroll manager when users are added to the group, it is an unnecessarily complex solution and will incur additional costs. It also does not provide the ability to remediate any users who have been incorrectly assigned to the Payroll Administrators group.
You should not change the group owner of the Payroll Administrators group to the payroll manager. This will not inform the payroll manager whenever any changes are made to the group or provide any additional functionality to regularly review and remediate group membership.


---

### References:

[Review access to groups and applications in access reviews](https://learn.microsoft.com/en-us/entra/id-governance/perform-access-review)  

[What are access reviews?](https://learn.microsoft.com/en-us/entra/id-governance/access-reviews-overview)  

[Get-ADGroup](https://learn.microsoft.com/en-us/powershell/module/activedirectory/get-adgroup?view=windowsserver2019-ps)  

---

## Q022:


You are the Azure administrator for your company. You create two virtual machines (VMs) named VM01 and VM02. Both are stored in the production-rg resource group.
The IT support team has the Contributor role at the subscription level.
You create a new VM named VM03 and deploy it to a new resource group named development-rg.
You need to allow the development team access to the new VM. They must be able to deploy new resources to the development-rg resource group only. They should not be allowed to grant access to any other users.

Which role should you assign to each resource to support the requirements? To answer, select the 
appropriate roles from the drop-down menus.

Options: Reader | Contributor | Owner | None

| Resource         | Role |
|------------------|------|
| Subscription     | None |
| production-rg    | None |
| development-rg   | Contributor |

---

### Answer:

You should assign the Contributor role to the development team but only to the development-rg resource group. You should not assign any other roles to any other resources.
Resources within Azure are protected using role-based access control (RBAC), and applied permissions are inherited from any parent object to its children. In this case, you want to grant the development team the ability to modify any existing resources or create new resources in the development-rg resource group.
You should not apply the Owner role. This would allow the development team the ability to grant other users access to resources.
You should not apply role permissions at any other level because you would not be using the least privilege model. Any other level of permissions would grant the development team more access than they require.

---

### References:

[What is Azure role-based access control (Azure RBAC)?](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview)  

---

## Q021:

You are the Azure administrator for your company. You are asked to design the appropriate access permissions for the finance, IT support, and development teams.
Your company's tenant contains a single management group named Group IT. Within the management group, there are two subscriptions named Production and Development.

- The finance team needs Read access to all subscriptions across the tenant.

- The IT support team needs full access to the Production subscription. The team should not be able to grant access to any resources.

- The development team needs full access to the Development subscription only, including the ability to grant other users access to resources.

Which role should you assign to each resource to support the requirements? To answer, select the appropriate roles from the drop-down menus.

Options: Reader | Contributor | Owner

| Resource                  | Team              | Role             |
|---------------------------|-------------------|------------------|
| Management group          | Finance           | Reader           |
| Production subscription   | IT Support        | Contributor      |
| Development subscription  | Development       | Owner            |

---

### Answer:

Permissions in Azure are inherited, and permissions that are granted on a parent item are inherited by any of its children.
You should add the Finance team to the Reader role scoped to the Group IT Management group because it contains all subscriptions in the tenant. Adding the finance team to the Readers role will grant read access to the management group, and all objects within it.
You should grant the IT Support team Contributor access to the Production subscription. The Contributor role allows full access to the object and any children without the ability to grant other users access.
Finally, you should grant the Development team Owner access to the Development subscription. The Owner
role is the only built-in role that allows full access to a resource and also the ability to grant other users
access.

---

### References:

[Assign Azure roles using the Azure portal](https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal)  

---

## Q020:

You are the Azure administrator for your company. The company migrated to Office 365 last year and is synchronizing identities to Azure via Microsoft Entra Connect. All users have a Microsoft 365 E5 license.
You need to activate and configure Microsoft Entra Privileged Identity Management (PIM) for your tenant. PIM must be configured to ensure the following:

- Any assigned roles should only be active for one hour
- Users must authenticate with multi-factor authentication (MFA) before using their roles

What should you do?

Set activations to one hour and enable MFA in PIM.
Enable MFA for all users.
Enable PIM on each of the privileged accounts.
Create a conditional access rule for PIM.

---

### Answer:
Set activations to one hour and enable MFA in PIM.


You should set activations to one hour in Privileged Identity Management (PIM) and enable multi-factor authentication (MFA) in PIM. When configuring PIM, roles can either be permanently assigned or eligible for assignment. Eligible roles can be set to expire between one and 72 hours after activation. If MFA is enabled in PIM, then a user must authenticate using MFA before they can start to use their roles.
You should not enable MFA for all users because that is not required. PIM will only prompt for MFA if MFA is enabled in PIM.
You should not enable PIM on each of the privileged accounts. Once PIM has been enabled, you can enable it for roles. You do not enable PIM on accounts.
You should not create a conditional access rule for PIM. Conditional access is used to enforce organization policies and rules based on how and where the user is authenticating from, among other things. For example, you could configure a conditional access rule to enforce an MFA prompt if a user authenticates from any location other than the corporate network.

---

### References:

[Start using Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-getting-started)  

[Plan a Privileged Identity Management deployment](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-deployment-plan)  

[Configure Microsoft Entra role settings in Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-how-to-change-default-settings)  

[What is Conditional Access?](https://learn.microsoft.com/en-us/entra/identity/conditional-access/overview)  

---

## Q019:

Your company has an Azure subscription, Sub1, that is associated with a Microsoft Entra tenant named company1.com.
Your colleague Darla is a Global Administrator in the company1.com tenant.
You transfer Sub1 to a new Microsoft Entra tenant named company2.com. You need to ensure that Darla maintains access to Sub1.

What should you do?

Transfer the billing ownership of Sub1 to Darla.
No action is necessary.
Invite Darla's user account into the company2.com directory.
Update the Azure key vault's tenant ID.

---

### Answer:
Invite Darla's user account into the company2.com directory.

To ensure that Darla maintains access to Sub1 resources, you should invite Darla into the company2.com Microsoft Entra tenant by using Microsoft Entra Business-to-Business (B2B) collaboration.
When you move a subscription to another Microsoft Entra tenant, all role-based access control (RBAC) assignments are lost. This means you need to either create new accounts in the new tenant or use Microsoft Entra B2B to invite them to join the new tenant. If you take no action, Darla will lose access to Sub1 resources.
You should not transfer the billing ownership of Sub1 to Darla. First, subscription billing ownership is not affected by a movement to another Microsoft Entra tenant. Second, the scenario says that Darla is a Global Administrator but not the subscription's designated billing administrator.
You should not update the Azure key vault's tenant ID. Although this action would be required if the subscription included Key Vault, the scenario makes no mention of such a resource.

---

### References:

[Associate or add an Azure subscription to your Microsoft Entra tenant](https://learn.microsoft.com/en-us/entra/fundamentals/how-subscriptions-associated-directory)  

[Transfer billing ownership of an MOSP Azure subscription to another account](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/billing-subscription-transfer)  

[Moving an Azure Key Vault to another subscription](https://learn.microsoft.com/en-us/azure/key-vault/general/move-subscription)  


---

## Q018:

Your company uses Microsoft Entra Privileged Identity Management (PIM).
You need to ensure that User1 requests administrative role elevation prior to taking any administrative action in Azure.

What should you do?

Assign User1 the Eligible role membership type
Invite User1 to an access review
Require User1 to use Microsoft Entra Multi-Factor Authentication (MFA)
Perform a resource audit on User1

---

### Answer:
Assign User1 the Eligible role membership type

To ensure that User1 requests administrative role elevation, you must assign them the Eligible role membership type in Microsoft Entra Privileged Identity Management (PIM). By default, Microsoft Entra users have permanent role assignments. With PIM, you can force users to use standard privileges and, when they need to perform any administrative actions, they can request elevation to high-privilege Microsoft Entra and Azure resource roles. You can also optionally require this role elevation to occur in a request approval cycle.
You should not invite User1 to an access review. Access reviews in Microsoft Entra PIM enable PIM administrators to determine whether Microsoft Entra users should remain associated with high-privilege roles. An access review in itself would not meet the scenario requirement.
You should not require User1 to use Microsoft Entra Multi-Factor Authentication (MFA). Microsoft Entra MFA does integrate with Microsoft Entra PIM. Although it is not a requirement, Microsoft strongly recommends activating MFA with Microsoft Entra PIM. Having only MFA activated is not enough to perform any administrative tasks. User1 also has to be assigned the Eligible role membership type to meet the goal.
You should not perform a resource audit on User1. Doing so would reveal their role membership changes, but this does not fulfill the scenario goal.

---

### References:

[Start using Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-getting-started)  

[What is Microsoft Entra Privileged Identity Management?](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-configure)    

[Plan a Microsoft Entra multifactor authentication deployment](https://learn.microsoft.com/en-us/entra/identity/authentication/howto-mfa-getstarted)  

[View audit history for Microsoft Entra roles in Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-how-to-use-audit-log)   


---

## Q017:

Your company has an Azure subscription named Sub1 that is associated with a Microsoft Entra tenant named company1.com.
You plan to configure Microsoft Entra Privileged Identity Management (PIM) to enforce least-privilege administration for Microsoft Entra ID and for Azure resources.
User1 needs to enable Microsoft Entra PIM. Their currently assigned role is the Developer role.

What should you do first?

Instruct User1 to consent to PIΜ.
Assign User1 the Owner role.
Instruct User1 to discover resources to manage in PIM.
Assign User1 the Global Administrator role.

---

### Answer:
Assign User1 the Global Administrator role.


You should assign User1 the Global Administrator role in your Microsoft Entra tenant first. 

A user must be assigned the Global Administrator role to be able to enable Microsoft Entra Privileged Identity Management (PIM). After a Global Administrator has set up Microsoft Entra PIM, they can then delegate Microsoft Entra PIM management to others by assigning them the Privileged Role Administrator Microsoft Entra role.
You should not assign User1 the Owner subscription role. Although Microsoft Entra PIM manages both Microsoft Entra ID and Azure resource role assignments, the PIM administrator only needs to be a Privileged Role Administrator to perform all PIM-related management tasks.
You should not instruct User1 to consent to PIM. Consenting to PIM is the first step in actually using the service. However, User1 would be unable to do so until they have been assigned the Global Administrator Microsoft Entra role.
You should not instruct User1 to discover resources to manage in PIM. Resource discovery is limited to Global Administrators or Privileged Role Administrators. Also, consent to PIM must be undertaken first before resource discovery can take place.

---

### References:

[Start using Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-getting-started)  

[Discover Azure resources to manage in Privileged Identity Management](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-resource-roles-discover-resources)  

[Microsoft Entra built-in roles](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference)  

[Azure built-in roles](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles)  

---

## Q016:

Your company recently completed an Office 365 migration and is using Microsoft Entra Connect to synchronize onsite Active Directory with Microsoft Entra ID. After a security incident, your company's security team enables and enforces multi-factor authentication (MFA) deployed on an on-premises server for all external sales reps.
The sales director is unable to access their account and an important presentation because the Microsoft Authenticator app does not launch.
You need to ensure that the director can access their presentation as quickly as possible without compromising the company's security policy.

What should you do?

Launch the Azure Portal app and disable MFA on the sales director's user account.
Use the Set-MsolUser -UserPrincipalName $user -StrongAuthentication Requirements:$false command.
Create a one-time bypass for the sales director's user account.
Launch Active Directory (AD) Users & Computers and disable MFA on the sales director's user account.

---

### Answer:
Create a one-time bypass for the sales director's user account.

You should create a one-time bypass for the sales director's user account. One-time bypasses are used as a temporary solution to MFA issues, for example when a user is not receiving a notification or phone call. They are time-limited and allow a one-time bypass so the user can access the desired resource.
You should not disable MFA on the sales director's account in AD Users & Computers. MFA is not controlled through the on-premises AD. It is controlled in Microsoft Entra ID.
You should not use the Set-MsolUser cmdlet. The Set-MsolUser cmdlet is used to configure MFA and not to disable it.
You should not launch the Azure Portal app and disable MFA on the sales director's user account. Although this would grant access to the resource, it would leave MFA disabled for any subsequent logins.

---

### References:

[Configure Microsoft Entra multifactor authentication settings](https://learn.microsoft.com/en-us/entra/identity/authentication/howto-mfa-mfasettings)  

[Set-MsolUser](https://learn.microsoft.com/en-us/powershell/module/msonline/set-msoluser?view=azureadps-1.0)  

[Configure MFA Server settings](https://learn.microsoft.com/en-us/entra/identity/authentication/howto-mfa-server-settings)  


---

## Q015:

Your company has a web app named CorpIntranet that uses Microsoft Entra authentication.
You configure password hash synchronization (PHS) in Microsoft Entra Connect to replicate on-premises Active Directory user accounts to Microsoft Entra ID.
You need to enforce two-step authentication for all Microsoft Entra users.

What should you use?


Microsoft Defender for Cloud
Microsoft Entra Conditional Access
Microsoft Entra Privileged Identity Management (PIM)
Azure Policy

---

### Answer:
Microsoft Entra Conditional Access


To enforce two-step verification, which also called multi-factor authentication (MFA), you should deploy a Conditional Access policy that requires MFA enrollment.
Microsoft Entra Conditional Access enforces policies after the user provides first-factor (password) authentication. Although Conditional Access policies can completely "shape" the user authentication environment, in this case you only need to configure the policy to grant access and require MFA. If the user has not yet enrolled in Azure MFA, they will be required to do so. Users who are already enrolled will be prompted with an MFA challenge as their second-factor authentication.
You should not use Azure Policy. Azure Policy is a governance tool with which you can standardize deployment attributes in your subscriptions. For example, you could deploy an Azure Policy that limits the regions your administrators can deploy resources to.
You should not use Microsoft Entra Privileged Identity Management (PIM). Microsoft Entra PIM is a platform to evaluate high-privileged Microsoft Entra and Azure resource roles, and to control their use.
You should not use Microsoft Defender for Cloud. Microsoft Defender for Cloud is a toolset that, among other features, analyzes the security posture of your subscription and offers recommendations for improvement.

---

### References:

[Tutorial: Secure user sign-in events with Microsoft Entra multifactor authentication](https://learn.microsoft.com/en-us/entra/identity/authentication/tutorial-enable-azure-mfa)   

[What is Conditional Access?](https://learn.microsoft.com/en-us/entra/identity/conditional-access/overview)  

[What is Azure Policy?](https://learn.microsoft.com/en-us/azure/governance/policy/overview)  

[What is Microsoft Entra Privileged Identity Management?](https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-configure)  

[What is Microsoft Defender for Cloud?](https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-cloud-introduction)  

---

## Q014:

You are an Azure administrator for a multi-tenant Microsoft Entra ID.
You need to provide users in Microsoft Entra Tenant1 access to resources in Microsoft Entra Tenant2.
Which three actions should you perform in sequence? To answer, move the appropriate actions from the list of possible actions to the answer area and arrange them in the correct order.

Send the Microsoft Entra Tenant1 users an invite from Tenant2.
Choose a Microsoft Entra identity provider for authentication.
Ensure that the Microsoft Entra Tenant1 users accept the invite.
Choose a Microsoft Account (MSA) identity provider for authentication.
Choose an email one-time passcode for authentication.
Choose a SAML/WS-Fed identity provider for authentication.

---

### Answer:

Send the Microsoft Entra Tenant1 users an invite from Tenant2.
Ensure that the Microsoft Entra Tenant1 users accept the invite.
Choose a Microsoft Entra identity provider for authentication.

For users from Microsoft Entra Tenant1 to be able to access resources in Microsoft Entra Tenant2, you should send an invite from Tenant2 first. You can do so in the Microsoft Entra ID portal by navigating to the Users menu, selecting Invite user, er, and adding guest user information.
Next, you should ensure that Microsoft Entra Tenant1 users accept the invite. This is needed so that users from Tenant1 can access resources in Tenant2.
Finally, you should choose a Microsoft Entra identity provider. Microsoft Entra ID is a cloud-based identity management service that provides user authentication services for Azure resources, Microsoft 365 resources, and software-as-a-service (SaaS) applications. Both tenants in the scenario are Microsoft Entra tenants, so you should use a Microsoft Entra identity provider. Users with Microsoft Entra accounts in an external Microsoft Entra tenant can be invited via email. After accepting the invitation, they can sign into the resources Microsoft Entra tenant without any further configuration.
You should not choose an MSA identity provider. MSA is an identity provider used for Microsoft's consumer products, such as Xbox LIVE, Outlook, etc. In this case, the organization's accounts reside in Microsoft Entra ID, which implies that users cannot authenticate using MSA.
You should not choose an SAML/WS-Fed identity provider. If the partner organization's identity provider is neither Microsoft Entra ID nor MSA, you can set up a custom authentication flow using the SAM/WS-Fed protocol. This could be the case if a partner's accounts reside in Active Directory (AD) on-premises.
You should not choose an email one-time passcode for authentication. This authentication mechanism can be used for external identities if they cannot be authenticated using any of the available identity providers.

---

### References:

[Compare self-managed Active Directory Domain Services, Microsoft Entra ID, and managed Microsoft Entra Domain Services](https://learn.microsoft.com/en-us/entra/identity/domain-services/compare-identity-solutions)  

[Add Microsoft Entra ID as an identity provider for External ID](https://learn.microsoft.com/en-us/entra/external-id/default-account)  

[Add Microsoft Entra B2B collaboration users in the Microsoft Entra admin center](https://learn.microsoft.com/en-us/entra/external-id/add-users-administrator)  

[Add Microsoft account (MSA) as an identity provider for External ID](https://learn.microsoft.com/en-us/entra/external-id/microsoft-account)  

[Federation with SAML/WS-Fed identity providers for guest users](https://learn.microsoft.com/en-us/entra/external-id/direct-federation)   

[Email one-time passcode authentication](https://learn.microsoft.com/en-us/entra/external-id/one-time-passcode)  

---

## Q011-013:

You have an Azure SQL Server instance in your subscription. Your passwords for the SQL Server instance are stored in a key vault.
Your organization has password rotation policies that require all SQL passwords to expire every three months. You decide to automate the password rotation in your key vault three days before the password is about to expire.
You need to implement this automation.

---

Solution: 
You create an Azure function with an Event Grid Trigger and configure the Key Vault Event Grid as the source.
Does the solution meet the goal?

---

### Answer: Yes

This solution meets the goal. 

To automate key rotation, you have to write a custom function that can first create a new key in the key vault and then update the SQL password. Since the old password would not yet have expired, applications that use SQL Server as the data source would still function as long as they have the password cached. Once the password is rotated, the applications would retrieve the new password from the key vault.

---

### References:

[Automate the rotation of a secret for resources that use one set of authentication credentials](https://learn.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation)  

---

Solution: 
You trigger an email to the SQL administrator when the password is about to expire. 
The administrator will update both the key vault and the SQL server with the new password using the Azure Command Line Interface (CLI).

Does the solution meet the goal?

### Answer: No

This solution does not meet the goal. 

The requirements state to automate the password rotation process. Even though this solution will automate the notification of the expiration, it will not automate the password rotation. The Azure CLI would have to be executed by the SQL Server administrator.

---

### References:

[Automate the rotation of a secret for resources that use one set of authentication credentials](https://learn.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation)  

---

Solution: 
You create a PowerShell runbook in an Azure Automation account and schedule it to run every 90
days.

### Answer: No

This solution does not meet the goal. 

The PowerShell runbook would provide the necessary automation for rotating the password, but the trigger is fixed at 90 days. Since you decide to rotate the password three days before the expiration date, it will not always be a 90-day interval.


---

### References:

[Automate the rotation of a secret for resources that use one set of authentication credentials](https://learn.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation)  

---

## Q008-010:

You have a hybrid configuration of Microsoft Entra ID.
You have an Azure storage account with a file share named `fileshare01`.
You plan to allow users to authenticate to `fileshare01` by using their Microsoft Entra credentials.
You need to configure the environment to support the planned authentication.

--- 

Solution: You assign the Storage File Data SMB Shar Contributor role to the users.
Does this solution meet the goal?

--

### Answer: Yes

This solution meets the goal. 

Azure Storage supports access to Azure files storage resources using Microsoft Entra credentials. To authorize your users you should assign to their account one of the following role based access control (RBAC) roles:

• Storage File Data SMB Share Reader: This role allows users to read files and directories in file shares over SMB.
Storage File Data SMB Share Contributor: This role allows users to read, write, and delete files and directories in file shares over SMB.
Storage File Data SMB Share Elevated Contributor: This role allows users to read, write, delete, and modify Windows ACLs in file shares over SMB.

---

### References:

[Assign share-level permissions for Azure file shares](https://learn.microsoft.com/en-us/azure/storage/files/storage-files-identity-ad-ds-assign-permissions?tabs=azure-portal)  

[AZ-500: Secure compute, storage, and databases](https://learn.microsoft.com/en-us/training/paths/secure-compute-storage-databases/)   

[Choose how to authorize access to blob data in the Azure portal](https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-data-operations-portal)  

[Authorize access to blobs using Microsoft Entra ID](https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-access-azure-active-directory)  

--- 

Solution: You deploy Microsoft Entra application proxy.
Does this solution meet the goal?

--

### Answer: No

This solution does not meet the goal. 

You should use Microsoft Entra Application Proxy to provide secure remote access to web applications hosted on-premises from a remote client. 

You can enable single sign-on (SSO) with Application Proxy. However, you cannot allow users to authenticate to the fileshare01 file share with Application Proxy.

---

### References:

[Microsoft Entra application proxy documentation](https://learn.microsoft.com/en-us/entra/identity/app-proxy/)  

--- 

Solution: You deploy the on-premises data gateway in the on-premises network.
Does this solution meet the goal?

---

### Answer: No

This solution does not meet the goal. 

You should not deploy an on-premises data gateway in the on- premises network. 

An on-premises data gateway provides quick and secure data transfer between on- premises data and several Microsoft cloud services, like Power BI, PowerApps, and Azure Logic Apps.

---

### References:

[What is an on-premises data gateway?](https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem)  

---

## Q004-007:

Company1 is a financial firm that specializes in crypto currencies. 

Company1 applications are developed in Docker containers and deployed 
to Azure virtual machines (VMs) in an Azure subscription named `Cloud`.

`Cloud` is associated with a Microsoft Entra tenant named `company1.net`.

`Cloud` contains the resources provisioned in four resource groups, 
as shown in the table below:

| Name       | Resource Group | Description                                          |
|------------|----------------|---------------------------------------------------|
| VNET1      | RG1            | Azure Virtual Network with address space 10.0.0.0/16 |
| Sub1       | RG1            | Subnet from VNET1 for prod environment with address 10.0.0.0/24  |
| Sub2       | RG1            | Subnet from VNET1 for dev environment with address 10.0.1.0/24  |
| VM1        | RG1            | Azure VM for production environment                 |
| VM2        | RG2            | Azure VM for development environment                |
| VM3        | RG3            | Azure VM running MySQL database for production      |
| VM4        | RG3            | Azure VM running MySQL database for development     |
| Storage1   | RG3            | Production Storage Account                          |
| Storage2   | RG3            | Development Storage Account                         |
| Registry1  | RG4            | Azure Container Registry for all images              |

The Azure VMs are associated with the subnets as shown below:

| Virtual Machine | Network Interface | Subnet |
|-----------------|-------------------|--------|
| VM1             | NIC1              | Sub1 |
| VM3             | NIC3              | Sub1 |
| VM2             | NIC2              | Sub2 |
| VM4             | NIC4              | Sub2 |

The following table shows the users contained in the tenant `company1.net`,
along with their attached roled in the `Cloud`. 

| User   | Role           |
|--------|----------------|
| User1  | Contributor    |
| User2  | AcrPull        |
| User3  | AcrPush        |
| User4  | AcrlmageSigner |      

`Cloud` contains resource group locks, as shown in the table below:

| Name  | Set on | Lock type |
|-------|--------|-----------|
| Lock1 | RG1    | Delete    |
| Lock2 | RG3    | Delete    |
| Lock3 | RG3    | Read-only |
| Lock4 | RG4    | Delete    |

`Cloud` also contains the Azure policies shown in the table below:

| Policy                     | Resource type    | Scope |
|----------------------------|------------------|-------|
| Not allowed resource types | registries       | RG1 |
| Allowed resource types     | virtual Machines | RG2 |
| Not allowed resource types | registries       | RG3 |
| Not allowed resource types | virtual Machines | RG4 |

**Storage2** has its firewall enabled.

---

## Requirements:

• A new user named `User5` is created in `company1.net`. 
This user needs permission to push and pull trusted images to a container registry.

• A new user named `User6` is created in `company1.net`. 
This user has the Owner role in `Cloud`.

• `Registry1` needs to be private and protected by authentication.

• The push operation in `Registry1` needs to be audited at the user level.

• The images in `Registry1` need to be frequently scanned for vulnerabilities.

• Azure-managed services need to be used whenever possible to reduce
administrative efforts. 

• Network access to `VM3` needs to be restricted to `VM1` only.

• Network access to `Storage1` needs to be restricted to `Sub1` only.

• Network access restrictions need to be applied at the resource level only.


---

## Q007

You create `User6` and assign them the `Owner` role at the `Cloud` subscription level.
In which resource groups could `User6` create a new Azure virtual machine?

- RG2 only
- RG1 only
- RG1, RG2 only
- RG1, RG2, RG3 only

> Relevant information:


> Relevant Requirements:
• A new user named `User6` is created in `company1.net`. 
This user has the Owner role in `Cloud`.


---

### Answer: RG1, RG2 only


Even if a user is assigned the Owner role in a subscription, resource group locks and Azure Policy are applied.

User6 could provision an Azure VM in resource groups RG1 and RG2 only. The Azure policy on RG2 allows only VMs to be provisioned, and the policy in RG1 only restricts the container registry to be provisioned.
User6 could not provision any resources to RG3 because a ReadOnly lock is enabled in this resource group. The delete lock type applied to other resource groups does not restrict you from provisioning new resources. You are only restricted from deleting the existing resources.

---

### References:

[Azure Policy built-in policy definitions](https://learn.microsoft.com/en-us/azure/governance/policy/samples/built-in-policies)  

[Lock your resources to protect your infrastructure](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources?tabs=json)  

---

## Q006:

You need to restrict network access to resources in Cloud as specified in the requirements.

Which network service should you use to restrict network access for `Storage1` and `VM3`? 

---

### Answer:

Storage1: Resource firewall
VM3: NSG

- You should use a resource firewall for Storage1. 

> Relevant information:

| Name       | Resource Group | Description                                          |
|------------|----------------|---------------------------------------------------|
| Storage1   | RG3            | Production Storage Account                          |

> Relevant Requirements:
• Network access to `Storage1` needs to be restricted to `Sub1` only.
• Network access restrictions need to be applied at the resource level only.

**Storage account resource firewalls** restrict access to the storage account public endpoint. 
**By default, all networks are allowed in the resource firewall**. 

You can select a virtual network (VNet) or IP range to restrict network access directly in `Storage1`. 
You can configure Storage1 to allow traffic only from the `Sub1` subnet.

- An NSG is needed for VM3

| Name       | Resource Group | Description                                          |
|------------|----------------|---------------------------------------------------|
| VM3        | RG3            | Azure VM running MySQL database for production      |

| Virtual Machine | Network Interface | Subnet |
|-----------------|-------------------|--------|
| VM3             | NIC3              | Sub1 |

> Relevant Requirements:

• Network access to `VM3` needs to be restricted to `VM1` only.
• Network access restrictions need to be applied at the resource level only.

An NSG contains security rules that allow or deny inbound network traffic in Azure. 
An NSG can be attached directly to an Azure VM, and you can create a security rule to allow inbound traffic only from VM1 using a private IP address.

> The following do not apply:

- You should not use Azure Firewall

This is a **managed network security service** from Azure that **protects the Azure Virtual Network (VNet)**. 
You can use Azure Firewall to centralize network connectivity policies in your VNets. 
However, **Azure Firewall is a separate resource that is not applied directly at the resource level**.

- You should not use a network appliance. 

You can deploy network appliance solutions from the Azure marketplace and configure the centralized 
network connectivity policies in your VNets. 
Managing an Azure VM with the network appliance will also increase the required administrative effort.

---

### References:

[Configure Azure Storage firewalls and virtual networks](https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security?tabs=azure-portal)   

[What is Azure Firewall?](https://learn.microsoft.com/en-us/azure/firewall/overview)    

[What is Azure Web Application Firewall on Azure Application Gateway?](https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview)  

[Network Appliances](https://azure.microsoft.com/en-us/solutions/network-appliances/)   

---

## Q005:

You need to ensure that the Docker containers running on VM2 can 
access Storage2 over the Microsoft backbone network only.

What should you do before you create a Docker container on VM2?

- Create a private endpoint for Storage2 and connect it to the Sub2.
- Create an application security group (ASG) and a network security group (NSG).
- Move Storage2 to RG2.
- Install the container network interface (CNI) plug-in.

The relevant information from the question and requirements sections:

| Virtual Machine | Network Interface | Subnet |
|-----------------|-------------------|--------|
| VM2             | NIC2              | Sub2 |

| Name       | Resource Group | Description                                          |
|------------|----------------|---------------------------------------------------|
| VNET1      | RG1            | Azure Virtual Network with address space 10.0.0.0/16 |
| Sub2       | RG1            | Subnet from VNET1 for dev environment with address 10.0.1.0/24  |
| VM2        | RG2            | Azure VM for development environment                |
| Storage2   | RG3            | Development Storage Account                         |

**Storage2** has its firewall enabled

---

### Answer:

-  You should create a private endpoint for Storage2 and connect it to the Sub2. 

The private endpoint uses a separate IP address from the Sub2 address space for the Storage2. 
As such, network traffic between the Docker containers running on VM2 and Storage2 traverses 
over Sub2 and private link using the Microsoft backbone network.

The following do not apply:

- You should not install the container network interface (CNI) plug-in. 

This plug-in is only allowed when using Azure Kubernetes Services (AKS).
[Kubernetes Network Plugins](https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/)
[Choose the best networking plugin for AKS](https://learn.microsoft.com/en-us/training/modules/choose-network-plugin-aks/)  

When you set up an Azure Kubernetes Service (AKS) cluster, it's important to consider the different options of 
network plugins for your business. Network plugins are required to configure network connectivity so applications
or pods in the cluster can communicate with each other.

- You should not create an application security group (ASG) and a network security group (NSG). 

An **ASG** is used to **group similar Azure VMs**, allowing you **to create security rules in an NSG** 
that references this application security group. 

This makes security rule management simpler as you can manage the NSG Rules of machine that run 
the same, similar or related apps as a signe group rather than down to the individual machines. 

However, you do not need an application security group to access a private service endpoint in the same subnet.

- You should not move Storage2 to RG2. 

Moving a storage account to another resource group within the same subscription does not affect network access
to a private service endpoint. VM2 can access Storage2, even if they are in different resource groups.

---

### References:

[Enable containers to use Azure Virtual Network capabilities](https://learn.microsoft.com/en-us/azure/virtual-network/container-networking-overview)  

[Deploy the Azure Virtual Network container network interface plug-in](https://learn.microsoft.com/en-us/azure/virtual-network/deploy-container-networking)  

[Configure Azure Storage firewalls and virtual networks](https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security?tabs=azure-portal)    

[Use private endpoints for Azure Storage](https://learn.microsoft.com/en-us/azure/storage/common/storage-private-endpoints)  

[Tutorial: Connect to a storage account using an Azure Private Endpoint](https://learn.microsoft.com/en-us/azure/private-link/tutorial-private-endpoint-storage-portal?tabs=dynamic-ip)  

[Network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview)  

[Move Azure resources to a new resource group or subscription](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/move-resource-group-and-subscription)  

---

## Q004:

You need to determine which users can upload and download the 
container images stored in `Registry1`, based on the attached 
role for each user.

Which users should you choose? 

Upload images: User1 & User3 only
Download images: User1, User2 User3 only

---

### Answer:

Only User1 and User3 can upload images to Registry1. 

You need to use a role with the push image permission. 
The `Owner`, `Contributor`, and `AcrPush` Azure Container Registry roles have this permission. 
Only User1 and User3 have one of these roles.

User1, User2, and User3 are eligible to download images from Registry1. 

You need to use a role with the pull image permission. 
All Azure Container Registry roles, **except AcrDelete and AcrlmageSigner**, have this permission. 
The users who have one of these roles are User1, User2, and User3.

User4 has the `AcrlmageSigner` role, which does not have the permission to upload or download 
container images from Registry1.

These are the roles assigned to each user:

| User   | Role           |
|--------|----------------|
| User1  | Contributor    |
| User2  | AcrPull        |
| User3  | AcrPush        |
| User4  | AcrlmageSigner |

The following is information that is relevant to this particular question:

| Name       | Resource Group | Description                                          |
|------------|----------------|---------------------------------------------------|
| Registry1  | RG4            | Azure Container Registry for all images              |

| Name  | Set on | Lock type |
|-------|--------|-----------|
| Lock4 | RG4    | Delete    |

| Policy                     | Resource type    | Scope |
|----------------------------|------------------|-------|
| Not allowed resource types | virtual Machines | RG4 |

---

### References:

[Azure Container Registry roles and permissions](https://learn.microsoft.com/en-us/azure/container-registry/container-registry-roles?tabs=azure-cli)  

---

## Q001-003:

Your organization has a subscription that hosts resources for 
multiple applications in Azure. 
The subscription is part of a tenant that has synchronization enabled 
using Microsoft Entra Connect with on-premises Active Directory Domain Services (AD DS). 

The resources for each application are contained in individual resource groups.

As additional users are added to the application teams, 
you add roles for those users at the resource group level. 
Users can manage multiple applications.

You need to efficiently manage the permissions that are assigned 
to the Microsoft Entra users for them to access these resource groups.

Solution-1: 

You create Microsoft Entra groups for each application, 
add users to these groups, 
and assign roles to the groups at the resource group level.

Does the solution meet the goal?
---

### Answer: Yes

This solution meets the goal. 

Creating Microsoft Entra groups provides centralized user management of groups of users rather than individual users. 

When the group is provided permissions at the resource group level, all users in the group inherit the permissions provided to the group. 

To add or remove permissions for a given user, you would just add or remove them from the corresponding Microsoft Entra group. 

Roles are a collection of permissions, while groups are a collection of users. 
With groups, you are able to manage a collection of permissions 
for a collection of users, which eases the management of both 
the permissions and the users.

---

### References:

[Manage Microsoft Entra groups and group membership](https://learn.microsoft.com/en-us/entra/fundamentals/how-to-manage-groups)  

---


Solution-2: 

You create security groups in AD DS, 
add users to these groups, 
and assign roles to the groups at the resource group level.

Does the solution meet the goal?

### Answer: Yes

This solution meets the goal. 

Creating Active Directory Domain Services (AD DS) security groups 
provides centralized user management of groups of users in your 
on-premises active directory. 

**Since these groups are synchronized with Microsoft Entra Connect**, 
they are available in Microsoft Entra to assign permissions. 

When the group is provided permissions at a resource group level, 
all users in the group inherit the permissions provided to the group. 

To add or remove permissions for a given user, you would just add or remove them from the corresponding AD DS group. Roles are a collection of permissions, while groups are a collection of users. With groups, you are able to manage a collection of permissions for a collection of users, which eases the management of both the permissions and the users.

---

### References:

[Active Directory security groups](https://learn.microsoft.com/en-us/windows-server/identity/ad-ds/manage/understand-security-groups)  

[Microsoft Entra Connect Sync: Understanding Users, Groups, and Contacts](https://learn.microsoft.com/en-us/entra/identity/hybrid/connect/concept-azure-ad-connect-sync-user-and-contacts)  


---

Solution-3: 
You remove permissions for the users at the resource group level and 
apply the same permissions for each individual user at the subscription level.

Does the solution meet the goal?

### Answer: No

This solution does not meet the goal. 

You should not assign users permissions at the subscription level. 

Even though you can easily add and remove permissions to individual users, 
adding user permissions at the subscription level would provide them with 
permissions to all resource groups. 

The permissions need to be managed at the resource group level since each 
resource group contains the resources for a different application, and only
the users who manage a given application would need to have permission to 
those resources. 

Roles are a collection of permissions, while groups are a collection of users. 
With groups, you are able to manage a collection of permissions for a collection 
of users, which eases the management of both the permissions and the users.

---

### References:

[Associate or add an Azure subscription to your Microsoft Entra tenant](https://learn.microsoft.com/en-us/entra/fundamentals/how-subscriptions-associated-directory)  

---
