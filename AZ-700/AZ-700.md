[Microsoft Certified: Azure Network Engineer Associate](https://learn.microsoft.com/en-us/credentials/certifications/azure-network-engineer-associate/?practice-assessment-type=certification)   

---

## Q07X:

---

### Answer:

---

### References

---

## Q070:

![image info](./Q70_1.PNG)

Your company has the Azure environment shown in the network architecture exhibit.
Your manager complains about the routing mechanism that has been used for years within the company.
You need to implement a solution that eliminates the process of directing connections into transit virtual networks (VNets).
What solution should you implement?
Choose the correct answer

- Azure Virtual Network Gateway
- Network Virtual Appliances (NVAS)
- Azure Firewall
- Azure Virtual WAN

---

### Answer:

- Azure Virtual WAN

You should implement Azure Virtual Wide Area Network (WAN) to eliminate the process of directing connections into transit virtual networks (VNets). Azure Virtual WAN is a service from Azure that enables you to replace the transit VNet with a Virtual WAN hub structure that increases the scale of Site-to-Site Virtual Private Network (VPN) tunnels and simplifies the routing architecture of the network. When this service is enabled, routing will be done through the Virtual WAN hub where any peered Vnet is going to update the global route table. To implement this service, you must login into the Azure portal, where you will create a virtual WAN on the Create WAN page.

You should not implement Azure Virtual Network Gateway. This solution is used to connect on-premises sites to Azure Virtual Networks, but does not provide the ability to eliminate the process of directing connections into transit VNets as Azure Virtual WAN does.
You should not implement Azure Firewall. Azure Firewall is a security service responsible for protecting running workloads in Azure from cyber threats.

You should not implement Network Virtual Appliances (NVAS). NVAs represent the devices that are deployed into the Virtual WAN hub, like Express Route or Cisco Cloud OnRamp for Multi-Cloud. These devices provide networking functions for your network. NVAs cannot be used in eliminating the process of directing connections into transit VNets, as Azure Virtual WAN does, but can be used to increase the security level of your network and prevent attacks carried out by hackers, as well as filtering traffic that is sent and received by the virtual machines of your network.

---

### References

[Tutorial: Create a site-to-site connection using Azure Virtual WAN](https://learn.microsoft.com/en-us/azure/virtual-wan/virtual-wan-site-to-site-portal)  

[Azure Virtual Network Gateway Improvements](https://azure.microsoft.com/fr-fr/blog/azure-virtual-network-gateway-improvements/)  

[Deploy highly available NVAS](https://learn.microsoft.com/en-us/azure/architecture/networking/guide/nva-ha?tabs=cli)  

What is Azure Virtual WAN?
What is Azure Firewall?

---

## Q069:

![image info](./Q69_1.PNG)

You recently migrated your organization's critical applications to Azure. The virtual machines running the applications are distributed across three virtual networks: VNet1, VNet2, and VNet3. The company has two sites: the head office and the branch office. See the exhibit for the current set-up.
The company wants to modernize its existing infrastructure, for which they plan to migrate to the Azure Virtual WAN to link up all their global networks. It decides to create a global WAN entity, named VWAN- CompanyA, in the Azure portal.
The virtual WAN needs to support virtual networks (VNets), Express Route, site-to-site (S25) and point-to-site (P2S) VPN connectivity.
The head office will be connected to the virtual WAN via a S2S VPN connection, and the branch office will be connected to the virtual WAN via an Azure Express Route connection.
For each of the following statements, select Yes if the statement is true. Otherwise, select No.


You need to create the virtual WAN named VWAN-CompanyA with type Basic to support the required remote connection types.
nO

You should create a virtual hub inside the VWAN-CompanyA virtual WAN entity to create the S2S VPN connection.
yES

A virtual WAN hub gateway should be used to connect VNet1, VNet2. and VNet3 with the head office resources via the S2S VPN connection.
yES

---

### Answer:

You do not need to create the virtual Wide Area Network (WAN) named VWAN-CompanyA with type Basic to support the required remote connection types. In order to support the site-to-site (525) virtual private network (VPN) and the Express Route connection type, you need to create the virtual WAN with type Standard. The Basic type virtual WAN supports site-to-site VPN only. The Standard type supports the following connection types:

- Express Route
- User VPN (P2S)
- VPN (site-to-site)
- Inter-hub and VNet-to-VNet transiting through the virtual hub
- Azure Firewall
-  Network Virtual Appliance (NVA) in a virtual WAN

You should create a virtual hub inside the VWAN-CompanyA virtual WAN entity to create the S2S VPN connection. The virtual hub is the representation of the region that you want to connect the different remote and virtual networks (VNets) to. A virtual WAN can contain different hub entities representing different regions. By design, the resource in different hubs can communicate with each other and you do not need to configure any special connectivity for that.
A virtual WAN hub gateway should be used to connect VNet1, VNet2, and VNet3 with the head office resources via S2S VPN connection. You can create different VPN sites inside the virtual hub and then simply connect from there. In order to enable connectivity between the VNets and the remote VPN users, you will also need to associate the required VNets to the virtual WAN hub entity.

---

### References

[Tutorial: Create a Site-to-Site connection using Azure Virtual WAN](https://learn.microsoft.com/en-us/azure/virtual-wan/virtual-wan-site-to-site-portal)  

What is Azure Virtual WAN?

---

## Q068:

Your company plans to migrate workloads to Azure from on-premises. There is currently no connectivity in place between your on-premises services and your Azure tenant.
You have been asked to design an Express Route connection solution with a business case. In addition to the requirement to connect to services in Azure and Microsoft 365, you must ensure that:

- The connection is Active/Active.
- The connection is 100-Gbps.
- The connection is private.

You need to select the most appropriate Express Route connectivity model for your design.
Which connectivity model should you use?
Choose the correct answer

Co-located at Cloud Exchange
Point-to-point ethernet
Direct from ExpressRoute site
Any-to-any networks

---

### Answer:

You should use the Direct from Express Route site Express Route connectivity model to meet your organization's requirements. The Express Route Direct connection model can facilitate large data ingestion and can provide dual 100-Gbps connectivity, an active/active connection, and a private connection directly from your on-premises network into Azure and Microsoft 365 services.

You should not use the Co-located at Cloud Exchange connectivity model. If you have services hosted in a co-located location with a cloud exchange, then you can make a request for a virtual cross-connection to the Microsoft cloud through the co-location provider's ethernet exchange. This can be a Layer 2 cross- connection or a Layer 3 managed cross-connection between your hosted services in the co-location and Microsoft Cloud. This is not a direct connection, and the connection speed will be dependent on the co- location provider's hardware.
You should not use the Point-to-point ethernet connectivity model. This allows you to connect your on- premises offices to Azure through a point-to-point ethernet link. This can also be a Layer 2 connection or a managed connection between your site and Azure. However, this is not a private link.
You should not use the Any-to-any networks connectivity model. The Any-to-Any (IPVPN) allows you to integrate your wide area network (WAN) with Azure and is typically a multiprotocol label switching VPN. It enables an any-to-any connection between your branch offices and data centers. The given scenario does not include a WAN, which makes this model inappropriate.

---

### References

[Express Route connectivity models](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-connectivity-models) 

[About Express Route Direct](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-erdirect-about)

[Express Route prerequisites & checklist](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-prerequisites)

[Extend an on-premises network using Express Route](https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/expressroute)  

What is Azure Express Route?


---

## Q067:


Your organization has services that are hosted both on-premises and in Azure. The company has been using an Azure site-to-site VPN to facilitate connectivity between Azure-hosted resources and on-premises resources. However, a recent increase in network traffic has revealed that an Azure Express Route is now required.
You have been tasked with configuring Azure Private Peering for the recently provisioned Express Route with the following details:

![image info](./Q67_1.PNG)

You need to configure Azure Peering for the circuit using PowerShell considering the details in the table. The Express Route Circuit name has been set to $ckt in our script.

Which cmdlets should you use? To answer, select the appropriate commands from the drop-down menus.

Choose the correct options

```
OPTIONS -Name "Express RouteCircA" -ResourceGroupName "ExpressRouteRG"

OPTIONS Name "AzurePrivatePeering" -ExpressRouteCircuit $ckt -PeeringType  AzurePrivatePeering -PeerASN 100-

PrimaryPeerAddress Prefix "172.16.0.0/30" -Secondary PeerAddress Prefix "172.168.0.4/30" -VlanId 300

OPTIONS -ExpressRouteCircuit $ckt

```

```
Get-AzExpressRouteCircuit -Name "Express RouteCircA" -ResourceGroupName "ExpressRouteRG"

Add-AzExpressRouteCircuitPeeringConfig Name "AzurePrivatePeering" -ExpressRouteCircuit $ckt 
-PeeringType  AzurePrivatePeering -PeerASN 100-

PrimaryPeerAddress Prefix "172.16.0.0/30" -Secondary PeerAddress Prefix "172.168.0.4/30" -VlanId 300

Set-AzExpressRouteCircuit -ExpressRouteCircuit $ckt

```

---

### Answer:

You should complete the script as follows:

```
Get-AzExpress RouteCircuit -Name "ExpressRouteCircA" -ResourceGroupName "ExpressRouteRG"
Add-AzExpress RouteCircuitPeeringConfig -Name "Azure PrivatePeering" ExpressRouteCircuit Sckt -PeeringType Azure Private Peering -PeerASN 100 Primary PeerAddressPrefix "172.16.0.0/30" -Secondary PeerAddressPrefix "172.168.0.4/30" -Vlanid 300
Set-AzExpress RouteCircuit ExpressRouteCircuit $ckt
```

You should first use the Get-AzExpress RouteCircuit cmdlet to check the Express Route and ensure it is provisioned and enabled.
You should then use the Add-AzExpress Route Circuit Peering Config, which will add a peering configuration to the existing Express Route named Express RouteCircA. In the given script, this Express Route name value has been set as $ckt.
Finally, you should use the Set-AzExpress Route Circuit that will save the modified changes to the Express Route configuration.
You should not use the Add-AzExpress Route CircuitConnectionConfig, as this cmdlet is used to add a circuit connection configuration to an existing private peering of an Express Route. In the given scenario, we need to add the private peering, so this cmdlet would not be valid.

---

### References

[Tutorial: Create and modify peering for an Express Route circuit using PowerShell](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-howto-routing-arm)  

[Tutorial: Create and modify peering for an Express Route circuit using CL](https://learn.microsoft.com/en-us/azure/expressroute/howto-routing-cli)

[Express Route circuits and peering](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings)  

[Get-AzExpressRouteCircuit](https://learn.microsoft.com/en-us/powershell/module/az.network/get-azexpressroutecircuit?view=azps-12.1.0&viewFallbackFrom=azps-10.2.0)

Add-AzExpress Route Circuit Peering Config
Set-AzExpress Route Circuit
Add-AzExpress Route CircuitConnectionConfig

---

## Q066:

Company1 has a large on-premises data center with multiple servers and hardware. Management at the company has taken the strategic decision to migrate all workloads to Microsoft Azure.
You have been hired as an Azure consultant to help plan the migration tasks.
You need to ensure that the on-premises data center connects to Microsoft Azure over a private connection. The company do not want to utilize the public internet for this connection.
Which solution should you use to meet the requirements?
Choose the correct answer
ExpressRoute
Site-to-Site VPN
Private Link Service
Azure Firewall

---

### Answer:

You should use Express Route. Express Route connections are used to connect on-premises networks to Microsoft Azure over a direct private connection. This can be achieved by either using an Express Route service provider or by connecting directly with Express Route Direct.
You should not use a Site-to-Site (S2S) VPN tunnel. This option allows organizations to configure connectivity from on-premises or another virtual network to Azure over an internet connection, which contradicts the scenario requirement of not using the public internet for this connection.
You should not use Private Link Service. Private link service is a technology provided by Azure, designed to allow consumers or networks to connect to other Azure services over a private connection. For example, the Azure Private Link service can be enabled on Azure SQL databases to ensure that connectivity from virtual networks travels over the Microsoft backbone using a private IP address instead of going over the internet.
You should not use Azure Firewall. Azure Firewall is a Firewall as a Service (FWaaS) provided by Microsoft. It allows customers to protect virtual networks against malicious threats by inspecting inbound and outbound network packets. Azure Firewall provides filtering on Layer 3-7 of the Open Systems Interconnection (OSI) model.

---

### References

[Express Route connectivity models](https://learn.microsoft.com/en-ca/azure/expressroute/expressroute-connectivity-models)  

[About Express Route Direct](https://learn.microsoft.com/en-ca/azure/expressroute/expressroute-erdirect-about)  


What is Azure Express Route?
What is Azure VPN Gateway?
What is Azure Private Link service?
What is Azure Firewall?

---

## Q065:

Your company has four on-premises sites. Three of them represent the branches of the company and the
fourth represents the main office. The company also has an Azure Virtual Network.
The four sites are connected to each other by a WAN network. The four sites connect to the virtual network through the public internet.
You need to establish a direct connection between the on-premises sites and the virtual network without the need to pass through the public internet.
What solution should you use?

Choose the correct answer

- ExpressRoute circuits
- ExpressRoute circuits
- Application Gateway
- Application Proxy
- Standard Load Balancer

---

### Answer:

- ExpressRoute circuits

You should use Express Route circuits to establish a direct connection between the on-premises sites and the virtual network without the need to pass through the public internet. An Express Route circuit is a private connection from your network to a Microsoft peering location that is a supported termination point within the Microsoft Cloud Network. By using Express Route circuits, you can bypass the public internet and achieve a secure and private connection between your sites and your virtual network. You should navigate to the Azure portal, and access the Create Express Route page to create your circuit. There are several types of Express Route circuits like Express Route Direct and Express Route Fast path that can be used to enter the global network of Microsoft from your on-premises site.
You should not use Standard Load Balancer. A Standard Load Balancer enables you to load balance protocol flows on all ports when using an Internal Load Balancer through High Availability ports. However, a Standard Load Balancer cannot be used to establish a direct connection between the on-premises sites and the virtual network without the need to pass by the public internet.
You should not use an Application Proxy. This solution can be used to publish on-premises applications to networks outside the company.

You should not use an Application Gateway. This load-balancing solution is used to load balance across servers at an application level. Application Gateway operates at layer 7 of the OSI model.

---

### References

What is Azure Express Route?

What is Azure Load Balancer?

[Remote access to on-premises applications through Azure AD Application Proxy](https://learn.microsoft.com/en-us/entra/identity/app-proxy/)  

What is Azure Application Gateway?

---

## Q064:

For security reasons, your organization decides to configure a Standard Express Route to connect directly to the Microsoft private network.
You plan to increase the network bandwidth of the Express Route gateway as the user traffic significantly increased.
You need to upgrade from the Standard SKU to the HighPerformance SKU.
Which Azure PowerShell cmdlets should you use to perform this change?

Choose the correct answer

- Set-AzVirtualNetwork
- Get-AzApplicationGatewaySku
- Resize-AzVirtual Network Gateway
- Reset-AzVirtualNetwork GatewayConnection

---

### Answer:


- Resize-AzVirtual Network Gateway

You should use the Resize-AzVirtual Network Gateway Azure PowerShell cmdlet to change the Express Route virtual network gateway Stock Keeping Unit (SKU):

```
Resize-AzVirtualNetworkGateway
-VirtualNetworkGateway <PSVirtualNetworkGateway>
-GatewaySku <String>
[-DefaultProfile <IAzureContextContainer>]
[<CommonParameters>]
```

You should not use the Set-AzVirtual Network PowerShell cmdlet to change the Express Route virtual network gateway SKU. This cmdlet is used to update a virtual network on the Azure portal.

```
Set-AzVirtualNetwork
-VirtualNetwork <PSVirtualNetwork>
[-AsJob]
[-DefaultProfile <IAzureContextContainer>]
[<CommonParameters>]
```

You should not use the Reset-AzVirtual Network Gateway Connection PowerShell cmdlet to change the Express Route virtual network gateway SKU. This cmdlet is used to reset a virtual network gateway.

```
Reset-AzVirtualNetworkGatewayConnection
-Name <String>
-ResourceGroupName <String>
[-AsJob]
[-DefaultProfile <IAzureContextContainer>]
[<CommonParameters>]
```

You should not use the Get-AzApplicationGateway Sku PowerShell cmdlet to change the Express Route virtual network gateway SKU. This cmdlet is used to get the details of the Application Gateway SKU.
Get-AzVirtualNetworkGateway
[-Name <String>]
-ResourceGroupName <String>
[-DefaultProfile <IAzureContextContainer>]
[<CommonParameters>]

---

### References

[Resize-AzVirtual Network Gateway](https://learn.microsoft.com/en-us/powershell/module/az.network/resize-azvirtualnetworkgateway?view=azps-12.1.0&viewFallbackFrom=azps-6.6.0)  

[Get-AzApplicationGatewaySku](https://learn.microsoft.com/en-us/powershell/module/az.network/get-azapplicationgatewaysku?view=azps-12.1.0&viewFallbackFrom=azps-6.6.0)

[Reset-AzVirtualNetworkGatewayConnection](https://learn.microsoft.com/en-us/powershell/module/az.network/reset-azvirtualnetworkgatewayconnection?view=azps-12.1.0&viewFallbackFrom=azps-6.6.0)

Set-AzVirtualNetwork

[About Express Route virtual network gateways](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-about-virtual-network-gateways)  

---

## Q063:

You experience a long link failure detection time between the Customer Premises Equipment (CPE)/Router and the Microsoft Enterprise edge (MSEE) devices on Azure Express Route private peering interfaces. These long link failures are causing quality issues for real-time applications and significantly degrade the user experience in the branch offices.
You need to speed up this link failure detection time so that redundant links can be used on the express route circuits to maintain the traffic quality.
Which technology should you use?
Choose the correct answer\

- BGP timers
- Bidirectional Forwarding Detection (BFD)
- Virtual Private Network (VPN)
- Open Shortest Path First (OSPF)

---

### Answer:

- Bidirectional Forwarding Detection (BFD)

You should use Bidirectional Forwarding Detection (BFD). BFD is a link failure detection mechanism that provides a faster failover from the primary link to the secondary link in case of link failure. The Border Gateway Protocol (BGP) keep-alive and hold-time play a role in determining the link failure detection time between MSEE and customer edge routers. In most cases, the link failure detection can take up to three minutes. To reduce this link failure detection time to a few seconds, it is recommended that you enable BFD. On the MSEE, the BFD is configured by default; you only need to configure it on the local edge routers and then associate it with the BGP session.
You should not use Border Gateway Protocol (BGP) timers. BGP is the protocol that runs the internet. This protocol helps to create links with next-hop autonomous systems (AS) and keep a map of the whole internet topology. The BGP neighbors will update each other about any routing changes they might detect. BGP keep-alive is used to keep track of its neighbors. By configuring a lower BGP keep-alive timer, the link detection failure time can be improved, but this will cause significant overhead on the routers because BGP is a resource-intensive protocol.

You should not use Open Shortest Path First (OSPF). OSPF is an Interior Gateway Protocol (IGP) based on the shortest path first algorithm. The OSPF uses concepts of an area, which comprises routing nodes, and maintains a list of all the optimal and suboptimal routes in its database. OSPF cannot be used to form peers with public internet routers.
You should not use Virtual Private Network (VPN). In most cases, VPN is the extension of the private internal network to remote locations or users. The traffic that flows via a virtual network is encrypted, thus it provides maximum security against traffic sniffing or replay attacks. VPN is a tunneling protocol and it cannot be used to detect the link failure events at L2 or L3.

---

### References

[Explore Azure Express Route](https://learn.microsoft.com/en-us/training/modules/design-implement-azure-expressroute/2-explore)  

[What is BGP? | BGP routing explained](https://www.cloudflare.com/learning/security/glossary/what-is-bgp/)

[Open Shortest Path First (OSPF) protocol States](https://www.geeksforgeeks.org/open-shortest-path-first-ospf-protocol-states/)  

---

## Q062:

Your company hosts its corporate services in Azure and uses Azure point-to-site VPN to allow users to connect into cloud-hosted VMs. The current solution uses certificate authentication and has been working fine since it was implemented over 12 months ago.
Multiple users have contacted the support desk to report problems when trying to connect to the point-to- site VPN. Upon further investigation, you find that all users are getting the following error: The message received was unexpected or badly formatted.
You need troubleshoot the issue and find the root case of what is causing this error.
What is the root cause of this error?
Choose the correct answer
The public key has expired.
The User Defined Routes (UDR) with default route is set incorrectly.
The root certificate public key has not been uploaded to the Azure VPN Gateway.
An incorrect Gateway type has been configured.

---

### Answer:

There are multiple reasons that may cause this error to be generated, including:

- The User Defined Routes (UDR) with default route on the Gateway subnet is set incorrectly.

- The root certificate public key has not been uploaded into the Azure VPN Gateway.

- The public key is corrupted or has expired.

The UDR and public key being uploaded to Azure VPN Gateway are tasks that are only necessary once when the initial configuration has been completed. In this scenario, the VPN was deployed over 12 months ago, indicating that the correct answer is that the public key has expired and needs to be renewed.

You will receive the "Target URI is not specified" error when the incorrect gateway type has been configured. This is, therefore, not the root cause of the issue.

---

### References

[Troubleshoot a Microsoft Entra authentication VPN client](https://learn.microsoft.com/bs-latn-ba/azure/vpn-gateway/troubleshoot-ad-vpn-client)  

[Troubleshooting: Azure point-to-site connection problems](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems)  

---

## Q061:

Your company hosts laas services in Azure. You have recently configured Point-to-Site VPN to integrate with Azure AD to allow the Dev team to use their corporate cloud native accounts to authenticate using the Azure Client VPN.
One of the Dev team has contacted the Support Desk and reported that they need to connect to Azure VMs, but they do not know how to connect into the VPN.
The Support Desk staff ask you to document the process of configuring the the Point-to-Site connection. You need to document only the necessary steps that need to be followed in order to configure the Azure VPN client to use Azure AD authentication.
Which four steps should you perform in sequence? To answer, move the appropriate steps from the list of possible steps to the answer area and arrange in the correct order.
Create a list in the correct order

Possible Steps
Export profile settings.
Import Certificate to the VPN Client.

Steps in Order

1. Download and install the Azure VPN Client.
2. Generate the VPN Client Profile Configuration Package.
3. Import the client profile settings to the VPN Client.
4. Create a connection.

---

### Answer:

You should initially download and install the Azure VPN client onto the Windows device that you will be connecting from. You can download the install files from the following URL: https://aka.ms/azvpnclientdownload or directly from the Microsoft Store.
Then, you should generate the VPN client profile configuration files. You can do this either via the Azure Portal or do so via PowerShell. To complete this task via PowerShell, you can run the following cmdlet:
$profile-New-AzVpnClientConfiguration -ResourceGroupName "<enter resource group name here>" -Name "<enter VPN Gateway name here>" -AuthenticationMethod "EapTls"
Sprofile.VPNProfileSASUrl
You should set the VPN profile name value to $profile before running this cmdlet and ensure you know the resource group name and the VPN Gateway name, as you will need to enter them both within the cmdlet. Running this cmdlet will generate a URL, which you need to browse to in order to download the zip file with the relevant configuration package files.
Then, you should import the client profile settings to the VPN Client. Here, you use the azurevpnconfig.xml file, which is part of the zip file you download in step two. This file is imported into the configuration using the Azure VPN Client software and it will populate a lot of the configuration. You need to specify the connection name, but everything else is automatically imported from the xml file.
Finally, you create the connection within the Azure VPN Client. In this part of the workflow, you should fill out the connection information, select Connect to connect to the VPN and select the correct credentials. This will then successfully connect the user to the VPN and grant them access to the relevant resources.
You should not export profile settings as this is an optional step when you want to distribute a client profile. In the given scenario, only the necessary steps should be documented.
You should not import a certificate into the VPN Client, as we are not using Certificate authentication. Instead, we are using Azure AD authentication, which does not need a certificate.

---

### References

[Configure the Azure VPN Client - Azure AD authentication - Windows](https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-entra-vpn-client-windows)

[Configure an Azure AD tenant and P2S configuration for VPN Gateway P2S connections](https://learn.microsoft.com/en-us/azure/vpn-gateway/openvpn-azure-ad-tenant)  

[Configure P2S for access based on users and groups Azure AD authentication](https://learn.microsoft.com/en-us/azure/vpn-gateway/openvpn-azure-ad-tenant-multi-app)

[Generate P2S Azure VPN Client profile configuration files Azure AD authentication](https://learn.microsoft.com/en-us/azure/vpn-gateway/about-vpn-profile-download)

---

## Q060:

An insurance company currently has Point-to-Site (P2S) VPN configured to allow a small number of their employees to connect to Azure resources.
You are tasked with improving the company's authentication methods.
You need to ensure that users can authenticate to the P2S VPN using their on-premises credentials.
What should you do?
Choose the correct answer

- Configure an active-active VPN gateway.
- Configure Network Address Translation (NAT) on the Azure VPN gateway.
- Configure a RADIUS server on-premises and integrate with the Active Directory (AD) server.
- Install and configure Azure Active Directory (Azure AD) Connect.

---

### Answer:

- Configure a RADIUS server on-premises and integrate with the Active Directory (AD) server.

You should configure a RADIUS server on-premises and integrate with the Active Directory (AD) server. The RADIUS server, configured either on-premises or in an Azure VNet, will allow users to utilize their organization's credentials to authenticate against P2S VPN connections. The VPN gateway acts as a messenger between the RADIUS server and the VPN device.
You should not configure an active-active VPN gateway. This is used to create highly available VPN connections between your networks and Azure. It is achieved by deploying a minimum of two VPN gateways and public IP addresses.
You should not install and configure Azure Active Directory (Azure AD) Connect. Depending on the deployment model, Azure AD Connect synchronizes on-premises Active Directory (AD) accounts to Azure AD. This alone will not allow users to utilize their on-premises credentials to authenticate against P2S VPN connections.
You should not configure Network Address Translation (NAT) on the Azure VPN gateway. NAT can be used to keep virtual machines private. Virtual machines can utilize a static public IP address associated with the NAT virtual network for outbound connectivity. A common use case for this feature is to address issues where conflicting IP address spaces are used.

---

### References

[Configure P2S VPN Gateway server settings - RADIUS authentication](https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-how-to-radius-ps)

[Configure active-active VPN gateways using the portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/active-active-portal)  

[https://learn.microsoft.com/en-us/azure/vpn-gateway/nat-overview#:~:text=About%20NAT%20on%20Azure%20VPN%20Gateway](https://learn.microsoft.com/en-us/azure/vpn-gateway/nat-overview)

what is Azure AD Connect?

---

## Q059:

Your company has an Azure virtual network (VNet). Your manager wants the company to be able to use custom domain names within the VNet.
You need to create a private DNS zone using online Azure PowerShell.
Which three actions should you perform in sequence? To answer, move the appropriate actions from the list of possible actions to the answer area and arrange them in the correct order.

Create a list in the correct order

Possible steps
Deploy an Azure Quickstart template.
Validate the deployment of the Azure Quickstart template.

Steps in order

1. Access Azure Cloud Shell.
2. Create a private DNS zone.
3. Create a test virtual machine.

---

### Answer:

You should first access Azure Cloud Shell to create a private DNS zone using online Azure PowerShell. Azure Cloud Shell enables you to configure Azure services over your browser.
Then, you should create a private DNS zone. You should use the New-AzPrivateDnsZone cmdlet to create the private zone within PowerShell. You have to specify the DNS zone name and at what resource group it is found, in addition to specifying which virtual network (VNet) this private DNS zone would be linked to.
Finally, you should create a test virtual machine. At this point, you test your created private DNS zone through test virtual machines. You should use the New-AzVm cmdlet to specify all the details related to the
test virtual machine.
You should not deploy an Azure Quickstart template. You create an Azure Quickstart template when you create a public DNS zone using Azure Resource Manager where you deploy the template that you reviewed on the Azure DNS domain hosting example page.
You should not validate the deployment of the Azure Quickstart template. This action is required after creating a public DNS zone using Azure Resource Manager, where you use the nslookup cmdlet for validation.

---

### References

[Quickstart: Create an Azure private DNS zone using Azure PowerShell](https://learn.microsoft.com/en-us/azure/dns/private-dns-getstarted-powershell)

[Quickstart: Create an Azure DNS zone and record using an ARM template](https://learn.microsoft.com/en-us/azure/dns/dns-get-started-template)  

---

## Q058:

Your company has an Azure Virtual Network. Your manager wants you to establish a point-to-site VPN connection that initiates at the company's workstation and terminates at an Azure Vnet gateway so that users at the company can access resources within the virtual network.
You need to use an authentication method that does not use OpenVPN.

What method should you use?

Choose the correct answer

- Azure Key Vault
- Azure Databricks
- Self-signed certificate authority
- RADIUS

You should perform the following steps in order:
1. Access Azure Cloud Shell.
2. Create a private DNS zone.
3. Create a test virtual machine.
You should first access Azure Cloud Shell to create a private DNS zone using online Azure PowerShell. Azure Cloud Shell enables you to configure Azure services over your browser.
Then, you should create a private DNS zone. You should use the New-AzPrivateDnsZone cmdlet to create the private zone within PowerShell. You have to specify the DNS zone name and at what resource group it is found, in addition to specifying which virtual network (VNet) this private DNS zone would be linked to.
Finally, you should create a test virtual machine. At this point, you test your created private DNS zone test virtual machine.
through test virtual machines. You should use the New-AzVm cmdlet to specify all the details related to the
You should not deploy an Azure Quickstart template. You create an Azure Quickstart template when you create a public DNS zone using Azure Resource Manager where you deploy the template that you reviewed on the Azure DNS domain hosting example page.
You should not validate the deployment of the Azure Quickstart template. This action is required after creating a public DNS zone using Azure Resource Manager, where you use the nslookup cmdlet for validation.

---

### Answer:

- Self-signed certificate authority

You should use a self-signed certificate authority to meet the requirements. A self-signed certificate authority is one of the three authentication methods that point-to-site Virtual Private Network (VPN) uses. This is the only method that does not use OpenVPN but instead, it requires you to generate client certificates from a root certificate, then upload the root certificate to Vnet gateway that authenticate the client certificates. This would achieve a secure connection between the users within the company and the virtual network that contains the resources. OpenVPN is a open source VPN solution available on Azure market that enables you to connect your workstation securely to your virtual network over the public internet.
You should not use the RADIUS authentication method. Remote Authentication Dial-In User Service (RADIUS) is a network protocol that protects a network by allowing centralized dial-in user authentication and authorization. You can use the RADIUS server with OpenVPN to provide authentication via an external directory server to your VPN users.
You should not use Azure Databricks. This service is a data analytics platform that contains applications related to Structured Query Language (SQL), data science, and machine learning. Azure Databricks cannot be used to achieve a secure connection.

You should not use Azure Key Vault. This service is used to encrypt keys and passwords that use keys stored within hardware security modules, but cannot be used to achieve a secure connection.

---

### References

[Create a self-signed public certificate to authenticate your application](https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-self-signed-certificate)  

[RADIUS authentication with Azure Active Directory](https://learn.microsoft.com/en-us/entra/architecture/auth-radius) 

Key Vault
What is Azure Databricks?

---

## Q057:

You plan to configure a Point-to-Site VPN for remote users.
Your network design team needs to identify the protocols that can be used to establish the connection to Azure Virtual Network Gateway.
Which three protocols can be used? Each correct answer presents a complete solution.
Choose the correct answers
Secure Socket Tunneling Protocol (SSTP)
SHA256
OpenVPN Protocol
MD5
AES256
IKEv2 VPN

---

### Answer:

You should identify the following protocols to use:

- OpenVPN Protocol
- Secure Socket Tunneling Protocol (SSTP)
-IKEv2 VPN

The client machine needs to establish a secure virtual private network (VPN) connection to the Virtual Network Gateway. The OpenVPN protocol is supported on the Virtual Network Gateway for creating a P2S VPN connection. SSTP is used to create a secure channel from the client's machine to Azure Virtual
Network Gateway and uses Point-to-Point Protocol (PPP) to send the traffic via a Transport Layer Security (TLS) session. Internet Key Exchange version 2 (IKEv2) VPN provides both security and encryption services. In summary, you can use any of these security protocols to establish the VPN connection from the client to Azure Virtual Network Gateway.
You should not identify Message digest 5 (MD5) and SHA256, as these are hashing standards. Hashing standards are not used to create an IPSec tunnel, they are used to validate the integrity of the data. Hashing functions are used to create a one-way hash of the data and to verify the integrity of the data. If the data is not tampered with, the hash function will generate the same hash result.
You should not identify Advanced Encryption Standard (AES). The AES 256 bit is an encryption standard developed by the National Institute of Standards (NIST). AES uses the same key to encrypt and decrypt the data. It is therefore known as a symmetric encryption algorithm.

---

### References

[Connect devices to networks with Point-to-site VPN connections](https://learn.microsoft.com/en-us/training/modules/design-implement-hybrid-networking/5-connect-devices-to-networks-point-to-site-vpn-connections)  

[Advanced Encryption Standard](https://www.tutorialspoint.com/cryptography/advanced_encryption_standard.htm)

[MD5 vs SHA-1 vs SHA-2 - Which is the Most Secure Encryption Hash and How to Check Them](https://www.freecodecamp.org/news/md5-vs-sha-1-vs-sha-2-which-is-the-most-secure-encryption-hash-and-how-to-check-them/)  

---

## Q056:

You host the company's development servers on the Azure cloud. You plan to configure a Point-to-Site (P2S) VPN connection for remote users who are already configured on-premises in the company's Active Directory (AD) server.
You want to use your existing AD server for the VPN authentication.
What solution should you use?

Choose the correct answer

- IPSec
- Azure Front Door
- RADIUS Server
- OpenVPN

---

### Answer:

- RADIUS Server

You should use a RADIUS Server. You will need to integrate your Remote Access Dial In User Service (RADIUS) server with the Active Directory (AD). The RADIUS server can be installed on-premises or inside an Azure virtual network. The Azure VPN gateway will relay the messages from the VPN client via the RADIUS server to the AD controller and vice versa.
You should not use OpenVPN. OpenVPN is a free open-source VPN system that can be used to deploy a fully working virtual private network setup. The OpenVPN cannot be used to relay the authentication messaging between the client and the AD servers.
You should not use IP Security (IPSec). IPSec is the protocol used by the VPN clients or nodes to create security associations with remote VPN servers. As it is a protocol itself, it cannot be used to solve the problem in this scenario.
You should not use Azure Front Door. Azure Front Door uses Microsoft edge locations and provides load balancing and site acceleration functions. SSL offload, path-based routing, quick failover, caching, and other Layer 7 capabilities are available to boost web application performance.

---

### References

[Connect devices to networks with Point-to-site VPN connections](https://learn.microsoft.com/en-us/training/modules/design-implement-hybrid-networking/5-connect-devices-to-networks-point-to-site-vpn-connections)  
What is fRONT dOOR?

---

## Q055:

> Exhibit:

```
New-AzResource Group -Name RG-A-Location EastUS

$virtual Network = New-AzVirtual Network -ResourceGroupName RG-A
-Location EastUS -Name VNET-A-Address Prefix 172.16.0.0/16

$subnetConfig = Add-AzVirtualNetworkSubnetConfig -Name SN-A
-AddressPrefix 172.16.0.0/24 -Virtual Network $virtual Network

$virtual Network | Set-AzVirtualNetwork
$vnet = Get-AzVirtualNetwork -ResourceGroupName RG-A -Name VNET-A

Add-AzVirtualNetworkSubnetConfig -Name 'GatewaySubnet'
-AddressPrefix 172.16.255.0/27 -VirtualNetwork $vnet

$vnet | Set-AzVirtualNetwork

$gwpip New-AzPublicIpAddress -Name "VNETAGWIP" -ResourceGroupName "RG-A" -Location "EastUS" -AllocationMethod Static
```

Your company has an existing Azure subscription in which it hosts resources, applications and services in the UK South region. The company has recently opened an office in Virginia, USA which will have limited space of on-premises hardware. The directors decide to host services in Azure in the East US region.
Initially, Admin-A started to create the base-line resources within the East-US region as shown in the exhibit, however he did not complete the process. The office is due to launch in a few weeks and there is still not connectivity between the Virginia Office and Azure. You are tasked with reviewing the existing PowerShell script and complete the configuration to which will connect the local office network with Azure.
You need to use PowerShell to complete the configuration to connect the Virginia Office with Azure.
Which cmdlets should you use? To answer, select the appropriate options from the drop-down menus.

Choose the correct options

OPTIONWS: 
Get-AzVirtualNetworkSubnetConfig 
New-AzVirtualNetworkGateway
Get-AzVirtualNetworkGateway
New-AzVirtualNetworkGatewayIpConfig

```
1 $vnet Get-AzVirtual Network -Name VNETA -ResourceGroupName RG-A

2 $subnet = OPTION-2 -Name 'GatewaySubnet' -VirtualNetwork $vnet

3 $gwipconfig = OPTION-3 Network GatewayIpConfig
-Name gwipconfigA -SubnetId $subnet.Id

4-PublicIpAddressId $gwpip.Id

5 OPTION-5 -Name VNetAGW-ResourceGroupName RG-A-Location "East

6 US" -IpConfigurations $gwipconfig -GatewayType "Vpn" -VpnType "RouteBased" -GatewaySku

7 VpnGw2-VpnGatewayGeneration "Generation2"
```

```
1 $vnet Get-AzVirtual Network -Name VNETA -ResourceGroupName RG-A
2 $subnet = Get-AzVirtualNetworkSubnetConfig
-Name 'GatewaySubnet' -VirtualNetwork $vnet
3 $gwipconfig = New-AzVirtual Network GatewayIpConfig
-Name gwipconfigA -SubnetId $subnet.Id
4-PublicIpAddressId $gwpip.Id
5 New-AzVirtualNetworkGateway
-Name VNetAGW-ResourceGroupName RG-A-Location "East
6 US" -IpConfigurations $gwipconfig -GatewayType "Vpn" -VpnType "RouteBased" -GatewaySku
7 VpnGw2-VpnGatewayGeneration "Generation2"
```

---

### Answer:

You should complete the code as follows:

```
$vnet Get-AzVirtualNetwork -Name VNETA -ResourceGroupName RG-A
$subnet = Get-AzVirtualNetworkSubnetConfig -Name 'GatewaySubnet'
VirtualNetwork $vnet
Sgwipconfig = New-AzVirtualNetworkGatewayIpConfig -Name gwipconfigA -SubnetId $subnet.Id
-PublicIpAddressId $gwpip.Id
New-AzVirtualNetworkGateway -Name VNetAGW -ResourceGroupName RG-A
Location "East US"
-IpConfigurations Sgwipconfig -GatewayType "Vpn" -VpnType "RouteBased" -GatewaySku VpnGw2 -VpnGatewayGeneration "Generation2"
```
You should use the Get-AzVirtual Network SubnetConfig cmdlet which will retrieve information regarding the subnet 'Gateway Subnet' in the VNETA.
You should then use the New-AzVirtual Network GatewaylpConfig cmdlet which will create the IP configuration for the virtual network gateway named gwipconfigA with the subnet and public IP address that were created by Admin-A as shown in the exhibit.
You should use the New-AzVirtual Network Gateway cmdlet to create the Virtual Network Gateway named VNetAGW which includes the Gateway IP Configuration created earlier in this script.
You should not use the Get-AzVirtual Network Gateway cmdlet in this script. This cmdlet is used to retrieve the information on an existing Virtual Network Gateway, but here we need to create a new one.

---

### References


[Create a route-based VPN gateway using PowerShell](https://learn.microsoft.com/en-us/azure/vpn-gateway/create-gateway-powershell)  

[Tutorial: Create and manage a VPN gateway by using the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-create-gateway-portal)  

[Tutorial: Create a site-to-site VPN connection in the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal)   

[Configure a virtual network gateway for Express Route using the Azure portal](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-howto-add-gateway-portal-resource-manager)  

[New-AzVirtual Network GatewaylpConfig](https://learn.microsoft.com/en-us/powershell/module/az.network/new-azvirtualnetworkgatewayipconfig?view=azps-12.1.0&viewFallbackFrom=azps-11.4.0)  

New-AzVirtual Network Gateway

---

## Q054:

Your company hosts applications and services in Azure that are consumed by users spread across four different locations. The network details for each location are shown in the table below:

| Office Name | On-Premises Subnet Address Space |
|-------------|---------------------------------|
| Office A    | 172.16.48.0/22                   |
| Office B    | 172.16.8.0/22                    |
| Office C    | 172.16.16.0/22                   |
| Office D    | 172.16.28.0/22                   |

You have been asked to configure a VPN Gateway from each local office to its respective Azure Region as shown in the table below:


| Office Name | Azure Region | vNet Address Space | Existing Virtual Subnet |
|-------------|-------------|-------------------|------------------------|
| Office A    | UK South    | 172.16.52.0/22   | 172.16.52.0/24         |
| Office B    | France Central | 172.16.12.0/22   | 172.16.12.0/24         |
| Office C    | East US     | 172.16.20.0/22   | 172.16.20.0/24         |
| Office D    | Italy North | 172.16.32.0/22   | 172.16.32.0/24         |

You need to ensure you configure the local network gateway for each Office VPN that does not overlap with its on-premises address space.
What address space should you use for each Office's local network gateway? To answer, drag the appropriate Office name to each subnet you need to configure. An Office name may be used once, more than once, or not at all.

172.16.15.0/24 : Office B
172.16.22.0/24 : Office C
172.16.34.0/24 : Office D
172.16.55.0/24: Office A


---

### Answer:

You should use the 172.16.15.0/24 address space when creating the local network gateway for Office B. Office B has an on-premises address space of 172.16.8.0/22 which includes the 172.16.8.1 to 172.16.11.254 address range. This means that the local network gateway cannot be within this address range. Office B needs to connect to the France Central region in the company's tenant, which has an existing virtual network with an address space of 172.16.12.0/22 and an existing subnet with a 172.16.12.0/24 address space. This means that the local network gateway for Office B in the France Central region must be within the 172.16.12.0/22 address space but after the 172.16.12.0/24 address range.

You should use the 172.16.22.0/24 address space when creating the local network gateway for Office C. Office C has an on-premises address space of 172.16.16.0/22 which includes the 172.16.16.1 to 172.16.19.254 address range. This means that the local network gateway cannot be within this address range. Office C needs to connect to the East US region in the company's tenant, which has an existing virtual network with an address space of 172.16.20.0/22 and an existing subnet with a 172.16.20.0/24 address space. This means that the local network gateway for Office C in the East US region must be within the 172.16.20.0/22 address space but after the 172.16.20.0/24 address range.

You should use the 172.16.34.0/24 address space when creation the local network gateway for Office D. Office D has an on-premises address space of 172.16.28.0/22 which includes the 172.16.28.1 to 172.16.31.254 address range. This means that the local network gateway cannot be within this address range. Office D needs to connect to the Italy North region in the company's tenant, which has an existing virtual network with an address space of 172.16.32.0/22 and an existing subnet with a 172.16.32.0/24 address space. This means that the local network gateway for Office D in the Italy North region must be within the 172.16.32.0/22 address space but after the 172.16.32.0/24 address range.
You should use the 172.16.55.0/24 address space when creating the local network gateway for Office A. Office A has an on-premises address space of 172.16.48.0/22 which includes the 172.16.48.1 to 172.16.51.254 address range. This means that the local network gateway cannot be within this address range. Office A needs to connect to the UK South Azure region in the company's tenant, which has an existing virtual network with an address space of 172.16.52.0/22 and an existing subnet with a 172.16.52.0/24 address space. This means that the local network gateway for Office A in the UK South region must be within the 172.16.52.0/22 address space but after the 172.16.52.0/24 address range.

---

### References


[Tutorial: Create a site-to-site VPN connection in the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal)  

[Modify local network gateway settings using the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-modify-local-network-gateway-portal)  

---

## Q053:

You are the Azure administrator in a organization.
You have configured a site-to-site VPN tunnel connecting the corporate on-premises network to Azure, which has been working without issues. However, many users report today that they cannot connect to Azure virtual machines.
You need to troubleshoot the site-to-site VPN connection and find out why it is not working.
Which troubleshooting step should you carry out?

Choose the correct answer

- Change the Origin response timeout (in seconds).
- Verify that the Provider status is showing as Provisioned.
- Check if Border Gateway Protocol (BGP) is enabled on the virtual network gateway.
- Verify the shared key between the on-premises VPN device and Azure.


---

### Answer:

- Verify the shared key between the on-premises VPN device and Azure.

You should verify the shared key between the on-premises VPN device and Azure. For a VPN connection to be successful, the pre-shared key for the on-premises network and in Azure must match. It is possible that a colleague could have changed the key in one of the locations causing the connection to fail.
You should not change the Origin response timeout (in seconds). This particular setting relates to Azure Front Door only. Changing the origin response timeout default settings is a valid troubleshooting step if you are faced with 503 error responses via Azure Front Door. 503 error codes are HTTP response codes that indicate that a web service is running as expected but, for whatever reason, the request could not be processed properly. This can often be a generic message and additional troubleshooting steps are required to resolve the issue.

You should not verify that the Provider status is showing as Provisioned. This is only a valid step for verifying Express Route circuits. Customers can work with connectivity providers to connect their on- premises networks to Azure. The two choices are Express Route connectivity provider or cloud exchange providers.
You should not check whether Border Gateway Protocol (BGP) is enabled on the virtual network gateway. BGP is an optional feature for VPN gateways that allows network routes to be advertised between Azure and on-premises networks. The on-premises routing device will also require BGP compatibility for this to work effectively. Enabling BGP will not allow an Azure administrator to effectively troubleshoot a site-to-site VPN connection.

---

### References

[Troubleshooting: An Azure site-to-site VPN connection cannot connect and stops working](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-site-to-site-cannot-connect)

[Troubleshoot Azure Front Door common issues](https://learn.microsoft.com/en-us/azure/frontdoor/troubleshoot-issues)

[Verifying Express Route connectivity](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-troubleshooting-expressroute-overview)  

[About BGP and VPN Gateway](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-bgp-overview)



---

## Q052:

Your customer needs to connect their on-premises network to their Azure subscription.
The customer's Azure subscription currently has a single Virtual Network (VNet). They would like a site-to- site VPN connection and they will handle the on-premises network configuration.
You need to configure the Azure site-to-site VPN tunnel and prove that it functions as expected.
Which four actions should you perform in sequence to meet the requirement with the least administrative effort? To answer, move the appropriate actions from the list of possible actions to the answer area and arrange them in the correct order.

Create a list in the correct order

Possible actions

Generate a root certificate.
Verify that 'Enabled' is showing under circuit status.
Download and configure the Azure VPN client.

Actions in order
Deploy and configure a Virtual Network Gateway and Local Network Gateway.
Instruct the customer to configure the on-premises VPN device and provide the shared key.
Create a VPN connection within the Virtual Network Gateway settings.
Connect to an Azure virtual machine from the on-premises network.

---

### Answer:

First, you should deploy and configure a Virtual Network Gateway and Local Network Gateway. As a VNet already exists in the subscription, there is no need to create a new one. A gateway needs to be created first, which will allow you to progress with the other steps. A Local Network Gateway is required in Azure as it references the on-premises network and allows Azure to communicate with the on-premises specified address ranges.
Next, you should instruct the customer to configure the on-premises VPN device and provide the shared key. Before a tunnel can be configured, the on-premises team must configure the on-premises VPN device. A shared key will also need to be created, which must be identical in Azure and on the on-premises VPN device.
Then, you should create a VPN connection within the Virtual Network Gateway settings. A VPN connection can only be created once the local network gateway and a shared key has been established.
Finally, you should connect to an Azure virtual machine from the on-premises network. The requirement states that you need to prove that the VPN tunnel works. Connecting to a virtual machine from the on- premises network is the best way to prove connectivity.
You should not generate a root certificate. This is used for point-to-site VPN connections only. When configuring a point-to-site VPN connection, you must upload the public key for a root certificate to Microsoft Azure. This ensures that the certificate will then be trusted for any point-to-site connectivity.
You should not download and configure the Azure VPN client. This is used for point-to-site VPN connections only.
You should not verify that 'Enabled' is showing under circuit status. This connection status is only a valid option for Express Route connections. Express Route is used to connect on-premises networks to Azure directly over a private connection.

---

### References

[Tutorial: Create a site-to-site VPN connection in the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal)  

[About Point-to-Site VPN](https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-about)

[Verify Express Route connectivity](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-troubleshooting-expressroute-overview)  

---

## Q051:

You work at a company that has an Azure Virtual Network and an on-premises environment.
You need to allow the virtual network to communicate with the on-premises environment over the public internet while maintaining encryption.

Which solution should you use?

Choose the correct answer

- Azure VPN gateway
- Application security groups
- Azure Private Link
- Azure AD Application Proxy

---

### Answer:
- Azure VPN gateway

You should use an Azure VPN gateway to allow the virtual network to communicate with the on-premises environment. A Virtual Private Network (VPN) gateway is a solution provided by Azure that uses site-to-site VPN to connect virtual networks with on-premises networks. It sends traffic between Azure and the on- premises network over a public internet connection. Using a site-to-site VPN connection enables you to achieve traffic encryption when the connection is established between the virtual network and the on- premises environment. To add a VPN gateway connection, you should access the Azure portal, and navigate to the Virtual network gateways page, where you can create a new VPN gateway.
You should not use application security groups. Application security groups are used for configuring network security, but will not enable your virtual network to connect to the on-premises environment.
You should not use an Azure Active Directory (AD) Application Proxy. This service can be used by a company to publish on-premises applications to networks outside the company.
You should not use Azure Private Link. Azure Private Link provides private access from an Azure virtual network to Platform as a Service (PaaS) services and Microsoft Partner services in Azure. Azure Private Link cannot be used to connect virtual networks to on-premises environments.

---

### References

[Tutorial: Create and manage a VPN gateway using the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-create-gateway-portal)  

[Application security groups](https://learn.microsoft.com/en-us/azure/virtual-network/application-security-groups)

[Microsoft Entra application proxy documentation](https://learn.microsoft.com/en-us/entra/identity/app-proxy/)  

What is Azure VPN Gateway?
What is Azure pRIVATE lINK?

---

## Q050:

You plan to integrate your on-premises database server to Azure via an S2S VPN tunnel.
The on-premises VPN gateway supports specific IKE Phase 1 and IKE Phase 2 algorithms. You configured these parameters via the custom policy under the VPN gateway connection configuration. The VPN tunnel is still not able to get established between the Azure VPN gateway and the on-premises VPN device. You have already verified the IP information on the local VPN device, the VPN device IP/FQDN address on the Azure Local Network Gateway, and that the IKE Phase 1 and IKE Phase 2 information is configured correctly.
You need to identify the next troubleshooting steps to fix the issue.
Which three steps should you identify? Each correct answer presents part of the solution.

Choose the correct answers

- Verify the Shared Key.
- Reset the VPN Gateway.
- Reset the VPN Connection.
- Change the Virtual Network Gateway SKU.
- Change the Virtual Network Gateway type.


---

### Answer:

- Verify the Shared Key.
- Reset the VPN Gateway.
- Reset the VPN Connection.

When you reset the Virtual Private Network (VPN) Gateway, it will help to reboot the Active instance of the gateway. If this does not work, you should then reset the VPN Gateway again. This time, it will reset the standby instance also and will failover to the active instance. Note that the Azure VPN Gateway uses two instances that run an Active/Standby mode. When you simply reset the VPN connection, the VPN tunnel is disconnected and the connection is re-established. The VPN gateway is not rebooted in this operation. Lastly, you must ensure that you use the same pre-shared key on both Azure VPN Gateway and the on- premises VPN device.
You should not change the Virtual Network Gateway type. The Virtual Network Gateway type option is used to define the role of the gateway. You can either define VPN or Express Route. As the type is already set to VPN, you do not need to modify it to Express Route.
You should not change the Virtual Network Gateway SKU. You can select different virtual network gateway SKUs depending on your requirements for the number of IPSec tunnels and the throughput. In the current scenario, the gateway SKU selection is fine as you are troubleshooting the problem with basic VPN connectivity.

---

### References


[Troubleshooting: An Azure site-to-site VPN connection cannot connect and stops working](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-site-to-site-cannot-connect)  

[Reset a VPN gateway or a connection](https://learn.microsoft.com/en-us/azure/vpn-gateway/reset-gateway)  

What is Azure VPN Gateway?

---

## Q049:

You plan to integrate your local network resources to Azure via an S2S VPN tunnel. You have already configured the Virtual Network Gateway, the Local Network Gateway and the Gateway Subnet on the Azure portal.
You need to configure the on-site VPN device so the VPN connection can be established.
Which three configuration items should you use? To answer, move the appropriate configuration item from the list of Configuration entities to the answer area and arrange them in any order.

Create a list in any order

Configuration entities

Virtual Network Gateway
Local Network Gateway

Configuration required for on-site VPN

VPN shared key
Public IP address of the VPN Gateway
VPN device configuration script

---

### Answer:

You should use the following items to configure the on-site Virtual Private Network (VPN) device:

- VPN shared key
- Public IP address of the VPN Gateway
- VPN device configuration script

The VPN shared key is the same key that you configured on the Virtual Network Gateway. First, you must ensure the same shared key is configured on the on-site VPN device and the Azure Virtual Network Gateway or the connection will not establish. Then, you need to get the Azure Virtual Network Gateway Public IP and configure the same on the on-site VPN device for the remote gateway. Lastly, you will need to download the VPN device configuration script. Azure provides device specific configuration for different vendors, which you can use to configure the local VPN device.
You should not use Virtual Network Gateway. The Virtual Network Gateway entity is needed on the Azure portal to configure a virtual VPN gateway that connects to your local VPN device. The Virtual Network Gateway is created inside the Gateway Subnet and there you can define the VPN type, the Gateway type and VPN SKU you are planning to use.
You should not use the Local Network Gateway item. The Local Network Gateway is a representation of the on-premises network and defines the VPN device access IP or FQDN and the private address space you would like to route from Azure to the local VPN device.

---

### References

[Tutorial: Create a site-to-site VPN connection in the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal)  

[Download VPN device configuration scripts for S2S VPN connections](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-download-vpndevicescript)  

---

## Q048:

An organization has connected its branch office via a site-to-site VPN connection to Azure VPN gateway.
They plan to change the branch office network address prefixes. They will also need to apply the prefix changes on Azure in order to use and access the Azure resource via the VPN tunnel and vice versa.
What should you configure in the Azure portal to meet the requirements?
Choose the correct answer

- GatewaySubnet
- Virtual Network Gateway
- Local Network Gateway
- Virtual Network

---

### Answer:
- Local Network Gateway

You should configure the Local Network Gateway in the Azure portal to update the new local network address prefix changes. The Local Network Gateway entity is used to configure the on-site VPN device public IP address and the local network prefix addresses. It is possible to edit the configuration after the entity is created.
You should not configure the Virtual Network Gateway in the Azure portal to update the new local network address prefix changes. The Virtual Network Gateway entity is the cloud VPN device in the Azure portal, which will establish the VPN tunnel with the on-premises VPN device.
You should not configure the Gateway Subnet in the Azure portal to update the new local network address prefix changes. The Gateway Subnet must be created for the VPN Gateway, and it contains the resources that will be used by the virtual network gateway resources and services.
You should not configure the Virtual Network in the Azure portal to update the new local network address prefix changes. The Azure virtual network provides the address space in a Classless Inter-Domain Routing (CIDR) block, which can be used to create different subnets.

---

### References

[Tutorial: Create a site-to-site VPN connection in the Azure portal](https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal)  

[What is Azure VPN Gateway?](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways)  

[About VPN Gateway configuration settings](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings)  

[Understanding CIDR Notation when designing Azure Virtual Networks and Subnets](https://devblogs.microsoft.com/premier-developer/understanding-cidr-notation-when-designing-azure-virtual-networks-and-subnets/)  

---

## Q047:

Your company migrated its infrastructure from on-premises to the cloud six months ago when you deployed multiple network security services including segmenting the virtual network, deploying an Azure Firewall, and disabling insecure protocols to mitigate threats.
The Head of Cloud Security has recommended a review of network security within the Azure tenant via Defender for Cloud to increase the security posture of the environment. They have recommended you to complete the NS-2 security control: Secure cloud services with network controls.
You need to configure the Azure Service as per the Microsoft Guidance to complete this security control.
Which Azure Service should you configure within your tenant to meet this security control?

Choose the correct answer

- Network Security Groups (NSGS)
- DDoS Protection
- Application Security Groups (ASGS)
- Private Endpoints

---

### Answer:

- Private Endpoints

You should configure Private Endpoints on the Azure services that support this to meet the NS-2 security control. The Azure guidance in the Defender for Cloud portal for NS-2 recommends deploying private endpoints for all Azure resources that support the Private Link feature, to establish a private access point for the resources.
You should not configure DDoS Protection on the Azure services. Enabling DDoS protection on your virtual network is covered within NS-5 security control: Deploy DDOS protection. The Azure guidance in the Defender for Cloud portal for NS-5 is to enable DDoS Network Protection plan on your VNet to protect resources that are exposed to the public networks.
You should not configure either Network Security Groups (NSGs) or Application Security Groups (ASGs) on Azure services. The NSG is a network layer control to restrict or monitor traffic by port, protocol, source IP
address, or destination IP address whereas the ASG allows you to configure network security as a natural extension of an application's structure, allowing you to group virtual machines and define network security policies based on those groups. Both of these configurations fall under the NS-1: Establish network segmentation boundaries security control which has already been implemented when the company initially migrated to Azure.

---

### References

[Secure score in Defender for Cloud](https://learn.microsoft.com/en-us/azure/defender-for-cloud/secure-score-security-controls)  

[Review security recommendations](https://learn.microsoft.com/en-us/azure/defender-for-cloud/review-security-recommendations)   

[Security recommendations](https://learn.microsoft.com/en-us/azure/defender-for-cloud/plan-multicloud-security-get-started)

[Get network security recommendations with Microsoft Defender for Cloud](https://learn.microsoft.com/en-us/training/modules/design-implement-network-security-monitoring/2-secure-your-virtual-networks-azure-portal)

---

## Q046:

Your company hosts its applications and infrastructure in Azure. There has been a recent attempt of distributed denial-of-service (DDoS) attack on your tenant, however the Firewall was able to prevent any major degradation in performance.
The Security Architect has created a new Azure DDoS protection plan named Ddos Protection PlanA to help mitigate this type of attack in the future and to ensure there is more defense against DDoS attacks. However, it is not enabled on the virtual network.
You need to use PowerShell to enable DDoS protection on the existing virtual network in your Azure tenant.
Which cmdlets should you use? To answer, select the appropriate options from the drop-down menus.

Choose the correct options

OPTIONS: 
Set-AzVirtualNetwork | Get-AzVirtualNetwork
New-AzDdosProtection | Get-AzDdosProtection

```
$ddosProtectionPlanID = OPTION-1 Plan -ResourceGroupName RG-A-Name Ddos ProtectionPlanA

$vnet = OPTION-2 -Name VNetA -ResourceGroupName RG-A

$vnet.DdosProtectionPlan New-Object Microsoft.Azure.Commands.Network.Models. PSResourceId

$vnet.DdosProtectionPlan. Id = $ddosProtectionPlanID. Id

$vnet.EnableDdosProtection = $true

$vnet | OPTION-3

```

```
$ddosProtectionPlanID = Get-AzDdosProtection Plan -ResourceGroupName RG-A-Name Ddos ProtectionPlanA

$vnet = Get-AzVirtualNetwork -Name VNetA -ResourceGroupName RG-A

$vnet.DdosProtectionPlan New-Object Microsoft.Azure.Commands.Network.Models. PSResourceId
$vnet.DdosProtectionPlan. Id = $ddosProtectionPlanID. Id
$vnet.EnableDdosProtection = $true
$vnet | Set-AzVirtualNetwork

```

---

### Answer:

You should complete the code as follows:

```
$ddosProtectionPlanID = Get-AzDdosProtectionPlan -ResourceGroupName RG-A-Name Ddos ProtectionPlanA
$vnet Get-AzVirtualNetwork -Name VNetA -ResourceGroupName RG-A
$vnet. DdosProtection Plan = New-Object
Microsoft.Azure.Commands.Network.Models. PSResourceId
$vnet. Ddos ProtectionPlan. Id = $ddosProtectionPlanID.Id
$vnet.EnableDdosProtection $true
$vnet Set-AzVirtualNetwork
```

This PowerShell script will configure a new DDoS protection plan on an existing virtual network. You first need to use the Get-AzDdos Protection Plan. This will retrieve a DDosS Protection plan ID.
You then need to use the Get-AzVirtual Network cmdlet to retrieve up-to-date information on the existing virtual network in the resource group you specify.
Finally, you need to use the Set-AzVirtual Network to update the properties of the virtual network and complete the task of enabling the DDoS Protection plan within it.
You should not use the New-AzDdos Protection Plan, as this is used to create a new DDoS Protection plan. In the scenario, the Security Architect has already created the DDoS Protection plan, therefore you need to enable an existing one with the virtual network rather than create a new plan.

---

### References

[QuickStart: Create and configure Azure DDoS Network Protection using the Azure portal](https://learn.microsoft.com/en-us/azure/ddos-protection/manage-ddos-protection)  

[QuickStart: Create and configure Azure DDoS Network Protection using Azure PowerShell](https://learn.microsoft.com/en-us/azure/ddos-protection/manage-ddos-protection-powershell)

[What is Azure DDoS Protection?](https://learn.microsoft.com/en-us/azure/ddos-protection/ddos-protection-overview)  

Set-AzVirtualNetwork 
Get-AzVirtualNetwork
New-AzDdosProtection 
[Get-AzDdosProtection](https://learn.microsoft.com/en-us/powershell/module/az.network/get-azddosprotectionplan?view=azps-12.1.0&viewFallbackFrom=azps-11.5.0)  

---

## Q045:

Your organization hosts its applications and infrastructure in Azure. They spread across multiple regions. including Italy North, West Europe, and UK South.
You have recently implemented a site-to-site VPN configuration between the UK South region and a new office that has opened in Manchester. During the initial testing, you were able to connect to virtual machines (VMs) hosted in the UK South region in your tenant from the Manchester office.
The Dev team has recently deployed a Linux server they are using to test a new application that they host on-premises, however they are unable to make a connection from the server. You are tasked with reviewing the configuration and troubleshoot the issue to find a resolution. You diagnose that a security rule on the NSG attached to the VM network card is the possible cause of the issue.
You need to use Network Watcher to confirm your diagnosis.

What feature should you use?

Choose the correct answer

- Next Hop
- IP Flow verify
- Packet Capture
- VPN Troubleshoot

---

### Answer:
- IP Flow verify

You should use the IP Flow verify to confirm your diagnosis. This feature allows you to diagnose connectivity issues from or to the internet and from or to the on-premises environment. An example of this is confirming if a security rule is blocking ingress or egress traffic to or from a virtual machine (VM) as in this scenario.
You should not use the Next Hop feature. This feature allows you to check if traffic is being directed to the intended destination by showing the next hop.
You should not use the Packet Capture feature. This feature enables you to create packet capture sessions to track traffic to and from a VM and helps to diagnose network anomalies both reactively and proactively. In this scenario, a NSG rule is causing the issue, therefore Packet Capture would not able to identify any NSG rule.
You should not use the VPN Troubleshoot feature. This feature allows you to troubleshoot gateways and connections to on-premises locations.

---

### References

[What is Azure Network Watcher?](https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-overview)

[Network insights](https://learn.microsoft.com/en-us/azure/network-watcher/network-insights-overview)

[Monitor your networks using Azure network watcher](https://learn.microsoft.com/en-us/training/modules/design-implement-network-monitoring/4-monitor-networks-using-azure-network-watcher)    

---

## Q044:

You plan to deploy an Azure virtual network for your company. You start designing the subnets by adding a load balancer.
You are tasked with adding a service that enables the company to connect its virtual machines through Remote Desktop Protocol (RDP) over Secure Sockets Layer (SSL) directly from the Azure site.
You need to find a solution to meet the requirements.

Which service should you use?
Choose the correct answer

- Azure Databricks
- Azure Front Door
- Azure Bastion
- RADIUS server

---

### Answer:
- Azure Bastion


You should use Azure Bastion. The Azure Bastion service is a fully managed PaaS service that you can deploy within your virtual network, It allows you to connect to your virtual machines through Remote Desktop Protocol/Secure Shell (RDP/SSH) over Secure Sockets Layer (SSL) directly from the Azure site.
You should not use a RADIUS server. Remote Authentication Dial-In User Service (RADIUS) is a network protocol that protects a network by allowing centralized dial-in user authentication and authorization.
You should not use Azure Front Door. This solution is used to elevate the global routing of your web, but cannot be used to connect virtual machines through RDP/SSH over SSL directly from the Azure site.
You should not use Azure Databricks. This service is a data analytics platform that contains applications related to Structured Query Language (SQL), data science, and machine learning. This solution cannot be used to connect virtual machines through RDP/SSH over SSL directly from the Azure site.

---

### References

[What is Azure Bastion?](https://learn.microsoft.com/en-us/azure/bastion/bastion-overview?toc=%2Fazure%2Fvirtual-network%2Ftoc.json)  

[RADIUS authentication with Azure Active Directory](https://learn.microsoft.com/en-us/entra/architecture/auth-radius)  

[What is Azure Front Door?](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview)  

[What is Azure Databricks?](https://learn.microsoft.com/en-us/azure/databricks/introduction/?toc=%2Fazure%2Fvirtual-network%2Ftoc.json)  

---

## Q043:

![image info](./Q43_1.PNG)
![image info](./Q43_2.PNG)

Your organization has an existing hub and spoke network topology deployed within its Azure environment, as shown in Exhibit A.
The company has decided to host a new enterprise application in Azure which requires a mesh network topology, as shown in Exhibit B. You use the connectivity configuration in Azure Virtual Network Manager to deploy the mesh network and manage the hub and spoke network moving forward.
You need to configure the virtual networks to allow them to communicate with each other.
Which connectivity construct should you use to configure communication between the virtual networks?

Choose the correct answer

- Connected Group
- Direct Connectivity
- Network Peering
- Site-to-Site VPN

---

### Answer:

- Connected Group

When you create a mesh network topology with Azure Virtual Network Manager, it creates a connectivity construct named Connected Groups. Virtual networks within a connected group are able to communicate with each other in the same way manually connected networks communicate with each other. Connected Groups do not have a peering configuration which is normally listed under 'Peerings' of the virtual network.
Virtual network peering allows you to connect two or more virtual networks together in Azure. Traffic in networks which are virtual peered uses the Microsoft backbone infrastructure. This is the connectivity construct used in Hub and Spoke network topologies, however this is not used with Mesh networks when configuring the topology via Azure Network Manager.
The VPN Gateway is an Azure service that is used to connect virtual networks hosts in Azure with networks hosted in on-premises locations like data centers. It allows you to send encrypted traffic between the Azure hosted virtual network and on-premises locations, however it is not used to connect/peer virtual networks to other virtual networks.
Direct connectivity is used within hub and spoke topology network configurations where an overlay of a connected group is created on top of your topology. It allows a spoke virtual network to communicate directly to other virtual networks in its group, but no virtual networks in other spokes.

---

### References

[Azure Virtual Network Manager documentation](https://learn.microsoft.com/en-us/azure/virtual-network-manager/)  

[Connectivity configuration in Azure Virtual Network Manager](https://learn.microsoft.com/en-us/azure/virtual-network-manager/concept-connectivity-configuration) 

[Virtual network peering](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview)  

[What is Azure VPN Gateway?](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways)   

---

## Q042:

Your company has an Azure tenant with one virtual network (VNet). You have deployed an Azure NAT gateway called NAT-01. An Azure virtual machine named VM-01 has been deployed to the VNet. An unused public IPv4 address with a standard SKU was also deployed to the subscription.
An external virtual machine named VM-02 is hosted by a third party and needs to communicate with VM-01.
You need to analyze the current configuration and confirm whether it is compatible with this requirement.
For each of the following statements, select Yes if the statement is true. Otherwise, select No.

The existing public IP address can be assigned to NAT-01.
Yes

VM-02 can initiate a connection with VM-01.
No

VM-01 can send ICMP packets to VM-02.
No

---

### Answer:

The existing public IP address can be assigned to NAT-01. Public IP addresses with a Standard Stock- keeping Unit (SKU) or IP prefixes are compatible with an Azure Network Address Translation (NAT) gateway. Azure Virtual Network NAT ensures that virtual machines in an Azure virtual network (VNet) can communicate to external services using the NAT gateway's public IP address. This saves administrators assigning the virtual machines a public IP address, which would increase the security threats in an environment. IP addresses with a basic SKU cannot be configured with NAT gateway.
The external VM cannot initiate a connection with VM-01. With an Azure NAT gateway, the traffic must originate from VM-01. VM-02 does not have the ability to initiate a connection with VM-01. It can only communicate back to VM-01 via a NAT gateway, if it is already engaged in an active flow.
VM-01 cannot send ICMP packets to VM-02. Only TCP and UDP network packets can be transferred across a NAT gateway. For example, if an Azure virtual machine needs to contact an external API on port 80 (HTTP), Azure NAT can be used to support this scenario. ICMP is not a supported protocol.

---

### References

[What is Azure NAT Gateway?](https://learn.microsoft.com/en-us/azure/nat-gateway/nat-overview)  

---

## Q041:

Your company has an Azure tenant with one virtual network (VNet). A production virtual machine has been configured in one of the subnets.
You need to configure outbound IP connectivity from the virtual machine to an external HTTP API. The solution must minimize costs.

What solution should you recommend?

Choose the correct answer

- Deploy an internal Azure load balancer to the virtual network (VNet).
- Configure Azure Private Link.
- Configure Azure Virtual Network Address Translation (NAT).
- Configure Azure Firewall.


---

### Answer:
- Configure Azure Virtual Network Address Translation (NAT).

You should configure Azure Virtual NAT. A NAT gateway can be used to forward traffic from private Azure resources to external services. This can be done by linking the NAT gateway to subnets. When NAT is configured, it uses Source Network Address Translation (SNAT) to translate private IP addresses in an Azure network to a static public IP Address. This allows private IP addresses to communicate with public hosts using the internet. When Azure Virtual NAT has been deployed and configured, outbound connectivity is automatically managed, without the need for additional configuration or user defined routes (UDR). This would be the recommended solution as it minimizes costs and would fulfill the requirement.
You should not configure Azure Firewall. Azure Firewall is a fully stateful Firewall as a Service (FWaaS) and provides SNAT automatically for all outbound connectivity. SNAT essentially translates all outbound network traffic to the Azure Firewall public IP address. However, this would not meet the requirement as it is not the most cost-effective solution. Azure Firewall is costly in comparison to the other answer choices provided.
You should not configure Azure Private Link. Private links are commonly used to protect access to Azure Platform as a Service (PaaS) services. For example, if you created a storage account that can only be accessed from an on-premises network, then you would utilize Azure Private Link.
You should not deploy an internal Azure Load Balancer to the virtual network (VNet). Azure Load Balancers operate at layer 4 of the Open Systems Interconnection (OSI) model. An internal Azure load balancer is used to distribute traffic to a group of Azure resources or servers. An internal load balancer will only distribute traffic to resources in the Azure VNet and will not allow external outbound connectivity.

---

### References

[Azure NAT Gateway resource](https://learn.microsoft.com/en-us/azure/nat-gateway/nat-gateway-resource)  

[Azure Firewall SNAT private IP address ranges](https://learn.microsoft.com/en-us/azure/firewall/snat-private-range)  

What is Azure Firewall?
What is Azure Private Link?
Azure Firewall pricing
Virtual Network pricing
Virtual network traffic routing
What is Azure Load Balancer?

---

## Q040:

You are an Azure administrator for an insurance company. You have successfully established a Site-to-Site (S2S) VPN tunnel from the on-premises network to Azure. The on-premises network address space is 10.0.0.0/24. In Azure, there is one virtual network (VNet) with three subnets named Gateway Subnet, application, and database.
You need to force internet-bound traffic from the database subnet back to on-premises for auditing and inspection.

What should you do?

Choose the correct answer

- Create a route table, add a user-defined route for 0.0.0.0/0 with the next hop type as None, and associate the route table to the database subnet.

- Create a route table, add a user-defined route for 10.0.0.0/24 with the next hop type as Virtual network gateway, and associate the route table to the database subnet.

- Create a route table, add a user-defined route for 0.0.0.0/0 with the next hop type as Internet, and associate the route table to the GatewaySubnet.

- Create a route table, add a user-defined route for 0.0.0.0/0 with next hop type as Virtual network gateway, and associate the route table to the database subnet.

---

### Answer:

- Create a route table, add a user-defined route for 0.0.0.0/0 with next hop type as Virtual network gateway, and associate the route table to the database subnet.


You should create a route table, add a user defined route for 0.0.0.0/0 with the next hop type as Virtual network gateway, and associate the route table to the database subnet. The address prefix 0.0.0.0/0 will direct all traffic. The requirement states that all internet-bound traffic needs to traverse from the on-premises network first. Choosing the next hop type as virtual network gateway will force traffic to the VPN gateway and back to on-premises. The traffic that requires redirection is based in the database subnet, and thus the route should be associated in this subnet only.
You should not create a route table, add a user defined route for 10.0.0.0/24 with the next hop type as Virtual network gateway, and associate the route table to the database subnet. The address space 10.0.0.0/24 refers to the on-premises network. This will not encapsulate internet-bound traffic.
You should not create a route table, add a user defined route for 0.0.0.0/0 with the next hop type as
Internet, and associate the route table to the Gateway Subnet. If the routing rule is associated to the
Gateway Subnet it will not be able to redirect traffic from the database subnet, which is the key requirement
highlighted in the scenario.
You should not create a route table, add a user defined route for 0.0.0.0/0 with the next hop type as None,
and associate the route table to the database subnet. Choosing the next hop type as None will essentially
drop all the network traffic in this instance. This is the opposite of what needs to be achieved.

---

### References

[Virtual network traffic routing](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview)  

---

## Q039:

![image info](./Q39_1.PNG)


Your organization recently acquired two new companies: Skrul Tech and Jinsey Electrics. As part of the merge, you were asked to connect the two virtual networks (VNets) to the parent hub VNet.
Please refer to the exhibit for the current Azure VNet configuration. Jinsey Electrics employees now need to connect to resources located on-premises but are unable to do so.
You need to allow Jinsey Electrics employees to connect to on-premises resources. The solution must be cost-effective. Which solution should you provide?
Choose the correct answer
Deploy a Network Virtual Appliance (NVA) in the Hub VNet and configure User-Defined Routes (UDR).
Deploy an Azure Firewall in the Hub VNet and configure User-Defined Routes (UDR).
Configure a User-Defined Route (UDR) from the Jinsey Electrics subnet to route traffic to the on-premises network.
Enable Use the remote virtual network's gateway property on the VNet peering connection.

---

### Answer:

You should enable Use the remote virtual network's gateway property on the VNet peering connection. The exhibit currently shows VNet peering as configured from both spoke VNets to the hub VNet. The reason why Jinsey Electrics employees cannot access on-premises resources is that traffic is currently prohibited along this route. Modifying the VNet peering and utilizing the remote virtual network gateway allows traffic to traverse via the VPN gateway to on-premises.
You should not deploy an Azure Firewall in the Hub VNet and configure UDR. Azure Firewall can technically be deployed in the Hub VNet and it can be used to route traffic back to the on-premises network. This does not meet the requirement of being cost-effective. Azure Firewall will impose additional monthly costs.
You should not deploy a NVA in the Hub VNet and configure User Defined Routes. This option is an alternative to using Azure Firewall. While it is technically possible to route traffic from the spoke VNets back to on-premises via an NVA, it does not meet the cost-effectiveness requirement.
You should not configure a UDR from the Jinsey Electrics subnet to route traffic to on-premises. The current
deployment highlighted in the exhibit will not allow traffic to traverse via the VPN gateway to the 
on-premises network. The VNet peering connection from the spoke needs to be modified to use the remote virtual network gateway.

---

### References

[Configure VPN gateway transit for virtual network peering](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-peering-gateway-transit)   

[Deploy and configure Azure Firewall in a hybrid network using Azure PowerShell](https://learn.microsoft.com/en-us/azure/firewall/tutorial-hybrid-ps)  

[Deploy highly available NVAS](https://learn.microsoft.com/en-us/azure/architecture/networking/guide/nva-ha)  

[virtual network traffic routing](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview)    

[Tutorial: Route network traffic with a route table using the Azure portal](https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-create-route-table-portal)  

---

## Q038:

You plan to configure your VNET for the middle tier of the web application that is not reachable from the public internet.
You need to configure a private address space for the middle tier VNET.
Which three private RFC 1918 IP address ranges should you use? Each correct answer presents a complete solution.

Choose the correct answers

172.16.0.0/12
192.168.0.0/16
10.0.0.0/8
172.15.0.0/24
192.167.0.0/24
224.0.0.0/4

---

### Answer:

172.16.0.0/12
192.168.0.0/16
10.0.0.0/8

You should use the following private RFC 1918 IP address ranges for the configuration of your VNET Address space:

10.0.0.0/8
172.16.0.0/12
192.168.0.0/16

As a best practice, Azure virtual resources (for example, virtual machines) should always be configured in an RFC 1918 private IP subnet. The IP address assignment will be controlled by Azure DHCP, which will lease the IPs as per the assigned subnet. The private IP address space is non-routable and cannot be used on the public internet.

You should not use the following:

192.167.0.0/24
172.15.0.0/24

These do not cover the complete range of the private RFC 1918 IP address space and just denote the public internet subnet range.
You should not use the 224.0.0.0/4 address range. It denotes the CIDR notation for the multicast address group. The complete range of addresses covered by this block is 224.0.0.0 to 239.255.255.255. Multicast addresses are used to send traffic to a group of devices, for example, a group of nodes that will listen to the multicast address. You should not use this address space as it does not cover the RFC 1918 IP address space required.

---

### References

[Azure Virtual Network concepts and best practices](https://learn.microsoft.com/en-us/azure/virtual-network/concepts-and-best-practices)  

[RFC1918 Private Address Space](https://datatracker.ietf.org/doc/html/rfc1918)  

[IP Multicast Addressing](http://www.tcpipguide.com/free/t_IPMulticastAddressing.htm)  

---

## Q037:

![image info](./Q37_1.PNG)

Your company has the Azure virtual network (VNet) shown in the Network Architecture exhibit.
Your manager wants to share a single IPv4 address with two VMs located at a subnet level.
You need to implement a solution that meets the requirement.

What solution should you use?
Choose the correct answer

- Azure Bastion
- Application Proxy
- ExpressRoute Direct
- A NAT gateway

---

### Answer:
- A NAT gateway

You should use a NAT gateway to share a single IPv4 address with two VMs located at a subnet level. A Network Address Translation (NAT) gateway is a solution provided by Azure that enables you to establish an outbound connection to the internet on a subnet level where you can attach the two VMs to a single IPv4 address. A NAT gateway can also be used to map a range of IP addresses, defined by an IP prefix, to internal resources.
You should not use Express Route Direct. Express Route Direct is used to connect you directly to the global network of Microsoft, but cannot be used to share a single IPv4 address with two VMs located at a subnet level.
You should not create an Application Proxy. This solution can be used to publish on-premises applications to networks outside the company.
You should not use Azure Bastion. The Azure Bastion service is a fully managed PaaS service that you can deploy within your virtual network. It allows you to connect to your virtual machines through Remote Desktop Protocol/Secure Shell (RDP/SSH) over Secure Sockets Layer (SSL) directly from the Azure site.

---

### References

[What is Azure NAT Gateway?](https://learn.microsoft.com/en-us/azure/nat-gateway/nat-overview)  

[About ExpressRoute Direct](https://learn.microsoft.com/en-us/azure/expressroute/expressroute-erdirect-about)  

[Microsoft Entra application proxy documentation](https://learn.microsoft.com/en-us/entra/identity/app-proxy/) 

[What is Azure Bastion?](https://learn.microsoft.com/en-us/azure/bastion/bastion-overview?toc=%2Fazure%2Fvirtual-network%2Ftoc.json)   

---

## Q036:

You have an Azure virtual network (VNet) that includes three separate subnets named SubnetA, SubnetB, and SubnetC. The subnets are configured as follows:
SubnetA contains a webserver.
SubnetB contains an API server.
SubnetC contains a Network Virtual Appliance (NVA).
You need to redirect the traffic from the webserver to a NVA and then to the API server.
What solution should you use?

Choose the correct answer

- Standard Load Balancer
- User-defined route
- Network security group (NSG)
- Application Gateway

---

### Answer:
- User-defined route

You should use a user-defined route (UDR) to direct the traffic from the webserver to a Network Virtual Appliance (NVA) and then to the API server. UDR is an Azure service that enables you to create and control network routes where your NVA can manage the traffic between separate subnets and direct them to the internet. When the traffic routes from the webserver to the NVA, through UDR, the firewall within the NVA will determine whether this traffic should be allowed or denied from being routed to the Application Programming Interface (API) server.
You should not use a network security group (NSG). A NSG is an Azure service that enables you to secure the premises of your network against threats. This inspects traffic and has the ability to allow or deny traffic from accessing a network packet.
You should not use a Standard Load Balancer. A Standard Load Balancer enables you to load balance protocol flows on all ports when using an internal load balancer through High Availability ports, but cannot be used to direct traffic.
You should not use Application Gateway. An application gateway is a load-balancing solution that is used to
load balance between servers at an application level. Application Gateway operates at layer 7 of the OSI model. The usage of an application gateway is beneficial in case you need to protect and secure the traffic sent and received by your app.

---

### References

[How to Configure Azure Route Tables (UDR) using Azure Portal and ARM](https://campus.barracuda.com/product/cloudgenfirewall/doc/170819589/overview)  

[Virtual network traffic routing](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview)  

[What is Azure Application Gateway?](https://learn.microsoft.com/en-us/azure/application-gateway/overview)  

[What is Azure Load Balancer?](https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-overview)

[Network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview)  

---

## Q035:

You plan to deploy a distributed application on Azure and some services require delegation to dedicated subnets.
You need to identify which Azure Network services must be deployed in their own dedicated subnet.

Which two services should you identify? Each correct answer presents a complete solution.

Choose the correct answers

- Application Gateway - Web Application Firewall (WAF)
- Azure Firewall
- Virtual machine scale sets
- Azure Active Directory Domain Services (Azure AD DS)
- Azure Kubernetes Service (AKS)

---

### Answer:

- Application Gateway - Web Application Firewall (WAF)
- Azure Firewall

You should identify Application Gateway - Web Application Firewall (WAF). The Azure Application Gateway is a layer 7 load balancer that you can use to manage the incoming traffic to your web applications. You need a dedicated subnet to deploy an Application Gateway WAF. WAF is a component of the Application Gateway that can be used to add a security layer to filter web traffic. You can configure different custom rules and can use Azure managed rules under WAF policies to protect your infrastructure. WAF can also provide protection against all the Open Web Application Security Project (OWASP) top 10 vulnerabilities and supports Core Rule Set (CRS) 3.1, 3.0, or 2.2.9.
You should also identify Azure Firewall. Azure Firewall is a fully-managed cloud firewall solution that you can use to configure L3-L7 security policies. Azure Firewall will have its own public IP and all the internal virtual instances will talk to the external network via the firewall. You must assign a dedicated subnet to the firewall and then use User Defined Routes (UDP) to route the traffic from the internal virtual resources to Azure Firewall using the Next hop type as Virtual appliance.
You should not identify Azure Active Directory Domain Services (AD DS). Azure AD DS can be deployed in a shared subnet with other resources. It provides an option to end users to configure their authentication
domains on the Azure cloud in order to move their legacy applications to Azure that cannot use modern authentication methods. Note that for Azure Active Directory Federation Services (ADFS) deployment, a dedicated subnet will be required.

You should not identify Azure Kubernetes Service (AKS). AKS can be deployed in a shared subnet with other resources. Kubernetes can be used for the orchestration and management of the containers.
You should not identify virtual machine scale sets. Azure virtual machine scale sets can be deployed in a shared subnet with other resources. Virtual machine scale sets can be used to create a highly available application by creating a group of virtual machine instances that will scale up and down as per the incoming traffic.


---

### References

[What is subnet delegation?](https://learn.microsoft.com/en-us/azure/virtual-network/subnet-delegation-overview)  

[What are virtual machine scale sets?](https://learn.microsoft.com/en-us/azure/virtual-machine-scale-sets/overview)    

[What is Azure Kubernetes Service?](https://learn.microsoft.com/en-us/azure/aks/what-is-aks)    

[What is Azure Active Directory Domain Services?](https://learn.microsoft.com/en-us/entra/identity/domain-services/overview)  

[What is Azure Firewall?](https://learn.microsoft.com/en-us/azure/firewall/overview)   

[OWASP Top Ten](https://owasp.org/www-project-top-ten/)

[What is Azure Web Application Firewall on Azure Application Gateway?](https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview)    

[Deploy dedicated Azure services into virtual networks](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-for-azure-services)  

---

## Q034:

You plan to configure a route table for CompanyA's core subnet. The table contains the user-defined routes (UDR) to override the Azure default system route table.

The required route table entries will be:

- The BLOCK_SUB route entry is used to block the traffic for destination prefix 192.168.0.0/16.

- The VNET_SUB route entry is used to send the destination prefix 10.7.0.0/24 traffic to the internal private network.

- the VNET_SUB2 route entry is used to send the destination prefix 10.8.0.0/24 traffic to the internal private network.

- The INT_0000 route entry is used to send all remaining traffic to the internet.

You need to complete the table with the correct destination prefix and next-hop address type.
How should you complete the table? To answer, select the appropriate options from the drop-down menus.

Choose the correct options:

OPTION-1: 0.0.0.0/0 | 0.0.0.0/32

OPTION-2: None | Internet | VirtualNetwork


| Name       | Address prefix | Next hop type | Next hop IP address |
|------------|----------------|--------------|---------------------|
| BLOCK_SUB  | 192.168.0.0/16 | OPTION-2        | -                  |
| INT_0000   | OPTION-1      | OPTION-2     | -                  |
| VNET_SUB   | 10.7.0.0/24     | OPTION-2 | -                  |
| VNET_SUB2  | 10.8.0.0/24     | OPTION-2 | -                  |

| Name     | Address range | Virtual network | Security group |
|----------|---------------|-----------------|----------------|
| default  | 10.7.0.0/24   | VNET-1         | -              |
| default  | 10.8.0.0/24   | VNET-2         | -              |


> Table with the right selections;

| Name       | Address prefix | Next hop type | Next hop IP address |
|------------|----------------|--------------|---------------------|
| BLOCK_SUB  | 192.168.0.0/16 | None        | -                  |
| INT_0000   | 0.0.0.0/0      | Internet     | -                  |
| VNET_SUB   | 10.7.0.0/24     | Virtual network | -                  |
| VNET_SUB2  | 10.8.0.0/24     | Virtual network | -                  |

| Name     | Address range | Virtual network | Security group |
|----------|---------------|-----------------|----------------|
| default  | 10.7.0.0/24   | VNET-1         | -              |
| default  | 10.8.0.0/24   | VNET-2         | -              |


---

### Answer:

| Name       | Address prefix | Next hop type |
|------------|----------------|--------------|
| BLOCK_SUB  | 192.168.0.0/16 | None        |
| INT_0000   | 0.0.0.0/0      | Internet     |
| VNET_SUB   | 10.7.0.0/24     | Virtual network |
| VNET_SUB2  | 10.8.0.0/24     | Virtual network |

The BLOCK_SUB route is sending all the traffic for destination prefix 192.168.0.0/16 to a None next-hop type. The None next-hop type is used to configure a sinkhole for an IP address or destination prefix. All of the traffic for this destination prefix will be dropped. The Internet next-hop type is used to send traffic to the public internet while the Virtual Network next-hop type is used to route traffic to the corresponding virtual network (VNet) subnet.
The INT-0000 route is used to send all the destination prefix 0.0.0.0/0 traffic to the next-hop type Internet. You should not use 0.0.0.0/32 for the INT_0000 route; it is an incorrect prefix to configure a default route towards the public internet. Moreover, for the public internet-bound traffic, the next-hop type should be always set to Internet.
The VNET_SUB route is used to send all the destination prefix 10.7.0.0/24 traffic towards the internal virtual network (VNet). You should not use the next-hop address of Internet or None here. The Internet next-hop type is used to send traffic to the public Internet while the None next-hope type is used to drop the traffic
The VNET_SUB2 route is used to send all the destination prefix 10.8.0.0/24 traffic towards the internal VNet. You should not set the next-hop address to Internet or None here. The Internet next-hop type is used to send traffic to the public Internet while the None next-hope type is used to drop the traffic.

---

### References

[Virtual network traffic routing](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview)   

---

## Q033:

You plan to use Azure NAT Gateway to provide a consistent public IP address space to internal Azure resources.
The NAT Gateway needs to be configured with a Public IP address and a subnet.
What is the maximum number of Public IP addresses that you can assign to Azure NAT Gateway?

Choose the correct answer

- 16
- 12
- 2
- 1

---

### Answer:
16 

You can assign a maximum of 16 Public IP addresses to Azure NAT Gateway. Azure NAT Gateway provides an option to Azure internal resources with private IP addresses to access the internet. NAT Gateway can also be used to hide the internal network topology, which helps to protect the internal virtual resources from the attacks originating from the public internet. You can also assign a Public IP prefix to the NAT gateway; all the IPs from the prefix will be used by the gateway for the outbound internet connection. NAT Gateway uses a mechanism called Port Address Translation (PAT) to translate the internal private IP address and port to the outbound Public IP address and port number.

---

### References

[Manage a public IP address with a NAT gateway](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/configure-public-ip-nat-gateway)  

---

## Q032:

You plan to configure your application on Azure, but you want to hide the internal network. You decide to use Azure NAT Gateway.
For better performance of the application, you decide to assign a public IP address prefix to cover six public IP addresses. You name the public IP prefix PUBLIC_NAT_PREFIX.

Which of the following public IP prefixes should you choose?

Choose the correct answer

/31
/29
/28
/30

---

### Answer:
/29

You should use the /29 prefix for the six public IPv4 addresses. A /29 prefix will give you a total of eight IP addresses from which you can use six IP addresses for your public IP addressing need. You can either configure a single IPv4 public IP address or a complete IPv4 network prefix (which will comprise a set of IPv4 addresses) and then bind it to the Network Address Translation (NAT) gateway. The following public IP prefix sizes are available:

/28 (IPv4) or /124 (IPv6) = Total 16 addresses
/29 (IPv4) or /125 (IPv6) = Total 8 addresses
/30 (IPv4) or /126 (IPv6) = Total 4 addresses
/31 (IPv4) or /127 (IPv6) = Total 2 addresses

NAT functionality provides an option for Azure resources to communicate with the public internet without exposing their internal IP addresses. This provides an additional layer of security. Public internet users only see the NAT Gateway IP(s) and are not capable of retrieving any information regarding the internal network.

---

### References

[Public IP address prefix](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/public-ip-address-prefix)  

[Azure NAT Gateway resource](https://learn.microsoft.com/en-us/azure/nat-gateway/nat-gateway-resource)  

---

## Q031:

Your company has two Azure virtual networks (VNets), named VNET-1 and VNET-2. A Windows10 virtual machine (VM) is configured in each VNet, as shown in the exhibit. The Windows10 machine in VNET-1 can RDP the Windows10 machine in VNET-2 using its public IP address. However, the Windows10 machine in VNET-1 cannot RDP to the Windows 10 machine in VNET-2 using its private IP address.
You need to enable the VM in VNET-1 to access the VM in VNET-2, so they can access each other using Azure private subnet IPs.
What solution should you configure?
Choose the correct answer
Private endpoints
VNet peering
Network security groups (NSGs)
Service endpoints

---

### Answer:

You should configure virtual network (VNet) peering to allow VNET-1 to VNET-2 private connectivity. In a VNet peering set-up, the traffic flows via the Microsoft backbone private network instead of using the public internet.
You should not configure Azure private endpoints. Azure private endpoints can be used to connect to Azure services via a private IP interface. The private endpoints cannot be used to peer two VNets. The virtual machine connects through a private endpoint to a private link resource, which can be any Azure resource, like, for example, Cosmos DB, Azure Database for PostgreSQL, and Azure Service Bus.
You should not configure Azure service endpoints. Azure Service endpoints are used to connect to Azure services via an optimized path. The service endpoints cannot be used to peer two VNets. The virtual machine will use the public IP of the Azure service to communicate to it and the service will see only the private IP of the virtual machine. The virtual machines or resources do not need a public IP address to communicate with Azure services via a service endpoint.

You should not configure network security groups (NSGs). NSGs are used to secure the virtual resources on Azure. NSGs are not used to peer two VNets. Instead, they are used to protect Azure resources by configuring inbound and outbound rules to filter the traffic. The NSG is a stateful firewall; any outbound connection by default allows the reverse traffic for that connection flow.

---

### References

[Virtual Network service endpoints](https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-about)  

[Choosing between Azure VNet Peering and VNet Gateways](https://azure.microsoft.com/en-us/blog/vnet-peering-and-vpn-gateways/)  

[Transport Layer Security protocol](https://learn.microsoft.com/en-us/windows-server/security/tls/transport-layer-security-protocol)   

[The HTTPS protocol explained! — Under the Hood](https://anushadasari.medium.com/the-https-protocol-explained-under-the-hood-c7bd9f9aaa7b)  

---

## Q030:

![image info](./Q30_1.PNG)

Your company has two Azure virtual networks (VNets), named VNET-1 and VNET-2. A Windows10 virtual machine (VM) is configured in each VNet, as shown in the exhibit. The Windows10 machine in VNET-1 can RDP the Windows10 machine in VNET-2 using its public IP address. However, the Windows10 machine in VNET-1 cannot RDP to the Windows 10 machine in VNET-2 using its private IP address.
You need to enable the VM in VNET-1 to access the VM in VNET-2, so they can access each other using Azure private subnet IPs.

What solution should you configure?

Choose the correct answer

- Private endpoints
- VNet peering
- Network security groups (NSGs)
- Service endpoints

---

### Answer:
- VNet peering

You should configure virtual network (VNet) peering to allow VNET-1 to VNET-2 private connectivity. In a VNet peering set-up, the traffic flows via the Microsoft backbone private network instead of using the public internet.
You should not configure Azure private endpoints. Azure private endpoints can be used to connect to Azure services via a private IP interface. The private endpoints cannot be used to peer two VNets. The virtual machine connects through a private endpoint to a private link resource, which can be any Azure resource, like, for example, Cosmos DB, Azure Database for PostgreSQL, and Azure Service Bus.
You should not configure Azure service endpoints. Azure Service endpoints are used to connect to Azure services via an optimized path. The service endpoints cannot be used to peer two VNets. The virtual machine will use the public IP of the Azure service to communicate to it and the service will see only the private IP of the virtual machine. The virtual machines or resources do not need a public IP address to communicate with Azure services via a service endpoint.
You should not configure network security groups (NSGs). NSGs are used to secure the virtual resources on Azure. NSGs are not used to peer two VNets. Instead, they are used to protect Azure resources by configuring inbound and outbound rules to filter the traffic. The NSG is a stateful firewall; any outbound connection by default allows the reverse traffic for that connection flow.

---

### References

[Virtual Network service endpoints](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview)  

[Network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview)  

[What is a private endpoint](https://learn.microsoft.com/en-us/azure/private-link/private-endpoint-overview) 

[Tutorial: Connect virtual networks with virtual network peering using the Azure portal](https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-connect-virtual-networks-portal)   

---

## Q029:

You work at a company that has an Azure subscription. You create a DNS zone so that your company can host its DNS domain within Azure DNS.
You retrieve the name servers of your created DNS zone.
You need to delegate the DNS domain.
For each of the following statements, select Yes if the statement is true. Otherwise, select No.


You should use the Azure name servers to substitute the Name Server (NS) records.
Yes

You should query the Start of Authority (SOA) record using the nslookup tool.
No

You should establish a test virtual machine.
No

---

### Answer:

You should use the Azure name servers to substitute the NS records to delegate the DNS domain. Delegating your domain is a required action to do so that you can host your Domain Name System (DNS) domain within Azure DNS. DNS zones are used by companies to host records of their companies' domain names.
You should not query the SOA record using the nslookup tool. This is done to verify whether the delegation to your domain is successfully done. You can use the nslookup command within the command prompt so that you can query the SOA record for the DNS zone you have created.
You should not establish a test virtual machine. This action will not allow you to delegate your DNS domain but would enable you to test if your private DNS zone is working properly.

---

### References

[Tutorial: Host your domain in Azure DNS](https://learn.microsoft.com/en-us/azure/dns/dns-delegate-domain-azure-dns)  

[Quickstart: Create an Azure private DNS zone using the Azure portal](https://learn.microsoft.com/en-us/azure/dns/private-dns-getstarted-portal)  

---

## Q028:

You plan to configure a 10.1.0.0/24 subnet under your VNet, which is configured with an address space of 10.1.0.0/16 for your web application.
You should only use non-reserved IP addresses in your solution so it does not conflict with Azure resources.

You need to identify which addresses from this subnet are reserved and cannot be used.
Which three addresses should you identify? Each correct answer presents a complete solution.

Choose the correct answers

- 10.1.0.230
- 10.1.0.0
- 10.1.0.255
- 10.1.0.1 
- 10.1.0.251

---

### Answer:

- 10.1.0.0
- 10.1.0.255
- 10.1.0.1 


The following addresses will be reserved from the subnet (10.1.0.0/24):

- 10.1.0.0 Network Address
- 10.1.0.1 Default Gateway Address
- 10.1.0.255 Broadcast Address

These addresses will not be allocated by Azure Dynamic host configuration protocol (DHCP) to any Azure virtual machine. By default, Azure will reserve five addresses from each subnet.

A few other addresses that will be reserved from a subnet are: x.x.x.2, x.x.x.3: Reserved by Azure to map the Azure DNS IPs to the virtual network (VNet) space.

The following are valid addresses and can be assigned to Azure virtual resources:

- 10.1.0.251
- 10.1.0.230

---

### References

[Azure Virtual Network frequently asked questions (FAQ)](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-faq)    

---

## Q027:

You plan to configure two Azure virtual networks: VNet1 and Vnet2.

| Vnet | Address space | Subnet assigned |
|---|---|---|
| VNet1 | 10.1.0.0/16 | 10.1.1.0/24 |
| VNet2 | 10.1.0.0/16 | 10.1.2.0/24 |


VNet1 is the Front web tier and will receive the incoming connections from the internet. It has virtual machine VM1 configured as a web server.
VNet2 is the Backend tier and will receive all the database connections from the front end web server. It has virtual machine VM2 configured as a database server.

The following table shows the virtual machine details and their corresponding private IP addresses:


| Virtual machine | Function | IP Address |
|---|---|---|
| VM1 | Web Server | 10.1.1.10 |
| VM2 | Database Server | 10.1.2.10 |

Network security groups (NSGs) in each virtual network are configured with the default RDP (3389) rule and
assigned to each virtual machine network interface.
For each of the following statements, select Yes if the statement is true. Otherwise, select No.


You can configure virtual network peering between VNet1 and VNet2.
No

Virtual machines in VNet1 are able to ping virtual machines in VNet2.
No

On initial creation, the subnet in VNet1 will be assigned the Default (Azure-provided) DNS servers.
Yes

---

### Answer:

You cannot configure virtual network peering between VNet1 and VNet2. You cannot configure virtual network peering for overlapping Classless Inter-Domain Routing (CIDR) blocks. In this scenario, both VNet1 and VNet2 have an address space of 10.1.0.0/16. Therefore, they cannot peer with each other.
Virtual machines in VNet1 are not able to ping virtual machines in VNet2. Both virtual networks are isolated, and therefore the resources inside these networks are not able to communicate with each other.
On initial creation, the subnet in VNet1 will be assigned the Default (Azure-provided) DNS servers. When you create a subnet, Azure will assign a default DNS server to it. These default DNS servers can be changed with custom DNS servers later on.

---

### References

[Azure Virtual Network concepts and best practices](https://learn.microsoft.com/en-us/azure/virtual-network/concepts-and-best-practices)  

[Name resolution for resources in Azure virtual networks](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances?tabs=redhat)  

[Virtual network peering](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview)  

---

## Q026:

You plan to migrate your organization domain name companyA.com from a third party domain registrar to Azure.
You must create the parent domain name entry on the Azure portal under the Domain Name System (DNS) zones named companyA.com.
What further action should you take to complete the domain name migration?

Choose the correct answer

- Update the Start of Authority (SOA) record for the parent domain name under Azure DNS zone with the third party domain registrar SOA details.

- Update the SOA record for the third party domain registrar with Azure DNS zone Start of Authority (SOA record) for the parent record.

- Update the parent domain registrar DNS name servers under the Azure DNS zone.

- Update the parent domain registrar DNS settings with the Azure DNS name servers.

---

### Answer:
- Update the parent domain registrar DNS settings with the Azure DNS name servers.

You should update the parent domain registrar Domain Name System (DNS) settings with the Azure DNS name servers. When you create the parent domain name entry under the Azure DNS zone, the following four Name Servers (NS) are assigned by default to the zone:

- Name server 1 ns1-35.azure-dns.com.
- Name server 2 ns2-35.azure-dns.net.
- Name server 3 ns3-35.azure-dns.org.
- Name server 4 ns4-35.azure-dns.info.

You will need to copy these four NS records to the third party registrar to complete the domain name migration to the Azure DNS zone. NS records are used to configure the authoritative DNS server detail that contains the actual domain information. You will always see these NS servers in Azure Public DNS zones and they cannot be deleted or edited. Should you like, additional name servers can be added.
You should not update the parent domain registrar DNS name servers under the Azure DNS zone. The domain is supposed to be delegated to the Azure DNS; therefore, there is no need to perform this configuration.
You should not update the Start of Authority (SOA) record for the third party domain registrar with Azure DNS zone SOA record for the parent record. This step is not required and you are not advised to modify the SOA information under the DNS settings.
You should not update the SOA record for the parent domain name under Azure DNS zone with the third party domain registrar SOA details. This step is not required. The SOA record is automatically populated by Azure when the parent domain zone is created. The SOA record defines the main NS for the domain name.

---

### References

[Tutorial: Host your domain in Azure DNS](https://learn.microsoft.com/en-us/azure/dns/dns-delegate-domain-azure-dns)  

---

## Q023-Q025:

You are one of four Azure administrators in your organization. You have deployed a web app in West Europe and configured it as a backend pool in Azure Front Door. Your co-workers have created a Web Application Firewall (WAF) policy and applied it to Azure Front Door. The rules engine has also been modified.
Users of the web app have recently complained that they are being presented with the following error message: "The request is blocked".

You need to promptly resolve this issue. The solution must not compromise security.

---

## Q025:

Solution: Remove the WAF policy from Azure Front Door.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not remove the WAF policy from Azure Front Door. Removing the WAF policy will restore traffic flow, but doing so will go against the compromising security requirement, as the web app will be exposed to security threats.

---

### References


[Policy settings for Web Application Firewall on Azure Front Door](https://learn.microsoft.com/en-us/azure/web-application-firewall/afds/waf-front-door-policy-settings)  

---

## Q024:

Solution: Verify that there are no conflicting rules in the WAF policy associated with Azure Front Door.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. You should verify that there are no conflicting rules in the WAF policy associated with Azure Front Door. Custom WAF rules take priority over Microsoft managed rules. Administrators can block incoming traffic to Azure Front Door using custom rules, based on conditions such as geolocation and IP address. If a blocked error message is presented, then it will be related to an Azure Front Door WAF policy.

---

### References

[Custom rules for Azure Web Application Firewall on Azure Front Door](https://learn.microsoft.com/en-us/azure/web-application-firewall/afds/waf-front-door-custom-rules)  


---

## Q023:

Solution: Verify that there are no conflicting rules in rules engine for Azure Front Door.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not verify that there are no conflicting rules in the rules engine for Azure Front Door. Rules engine can be used to provide a more granular control on how HTTP traffic is handled by Azure Front Door. For example, if a user is browsing on a mobile device, then a rule can be configured to re-direct users to a mobile friendly site. Rules engine will not, however, present users with blocked messages.

---

### References

[What is a rule set in Azure Front Door?](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-rules-engine?pivots=front-door-standard-premium)  

---

## Q020-Q022:

You are an Azure network administrator for a transport company. Azure Firewall has been deployed to filter traffic in a hub and spoke topology. The Azure Firewall rules are currently empty and require configuration.
Your colleague has requested external network connectivity for one of the application servers, which is in one of the spoke virtual networks (VNets).
You need to allow the application server to connect to www.company1.com using Azure Firewall and custom Domain Name System (DNS) servers.

---

## Q022:

Solution: create a DNAT (Destination Network Address Translation) rule collection AND THEN CREATE A dnat RULE.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Destination Network Address Translation (DNAT) rules allow users to connect to private IP addresses behind Azure Firewall via the public interface (IP address). A common scenario for this type of rule is for Remote Desktop Protocol (RDP) connections to an Azure virtual machine from the internet. For instance, a business need could surface that requires a third party support provider to connect to one of your Azure virtual machines over the internet using RDP. This would be needed so that the third party support provider could efficiently support the application that is running on the virtual machine and to hit any agreed Service Level Agreements (SLAs). All the third party would require is the public IP address in order to connect via RDP to the virtual machine from their headquarters.

---

### References

[Azure Firewall Policy rule sets](https://learn.microsoft.com/en-us/azure/firewall/policy-rule-sets)
[Filter inbound Internet traffic with Azure Firewall DNAT using the Azure portal](https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-dnat)  


---

## Q021:

Solution: Add an application and network rule collection, and then create an application network rule.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. An application rule alone will not meet the requirement of the request. DNS connectivity on port 53 is also required, which must be configured as a network rule. As a result, you need to configure both an application and a network rule. During the network rule creation, you must map port 53 to the custom DNS servers.

---

### References

[Configure Azure Firewall rules](https://learn.microsoft.com/en-us/azure/firewall/rule-processing)  

[Deploy and configure Azure Firewall using the Azure portal](https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-deploy-portal)  


---

## Q020:

Solution: Create an application rule collection, and then create an application rule.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. An application rule is based on Layer 7 of the Network OSI model. This will allow administrators to add a fully qualified domain name (FQDN) in the rule. For connectivity to www.company1.com to work, DNS on port 53 is also required, in the form of a network rule.

---

### References

[Azure Firewall Policy rule sets](https://learn.microsoft.com/en-us/azure/firewall/policy-rule-sets)  



--- 

## Q017-Q019:

You work as an Azure administrator for a clothing company. You have two virtual machines configured with the below network settings. Network Security Groups (NSGs) have been assigned to the individual virtual machine Network Interface Cards (NICs) with the default rules.

| VM Name | VNET | Subnet | NSG |
|---|---|---|---|
| VM01 | VNET1 | SN1 | NSG1 |
| VM02 | VNET1 | SN2 | NSG2 |

Your colleague needs to connect to VMO2 from VM01 using Remote Desktop Protocol (RDP) to test an application. You need to ensure that RDP access from VM01 to VMO2 will work.
The solution must not include any unnecessary administrative effort.

---

### References

[Network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview) 

---

## Q019:

Solution: Do Nothing.

Does this solution meet the goal?

---

### Answer:
Yes


This solution meets the goal. You should do nothing. The Remote Desktop Protocol allows remote users to connect to another Microsoft Windows machine from another location. This can either be over the public internet or a local network. The AllowVNetInbound rule allows any traffic between virtual networks by default. This includes RDP connectivity between virtual machines.

---

### References

---

## Q018:

Solution: Create an inbound rule for port 3389 on NSG1 and NSG1.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not create inbound and outgoing rules for port 3389 on both NSG1 and NSG2. The Remote Desktop Protocol allows remote users to connect to another Microsoft Windows machine from another location. This can either be over the public internet or a local network. NSGs consist of a rule labelled AllowVNetInBound. This rule allows all hosts inside the virtual network (including subnets) to communicate with each other.

---

## Q017:


Solution: Create an inbound rule for port 3389 on NSG2.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not create an inbound rule for port 3389 on NSG2. The Remote Desktop Protocol allows remote users to connect to another Microsoft Windows machine from another location. This can either be over the public internet or a local network. An additional rule to explicitly allow RDP traffic is not required. This is due to the default Network Security Group (NSG) rules already permitting any traffic between virtual networks and virtual machines.

---

## Q014-Q016:

You work as an Azure administrator for a logistics company. You have an Azure subscription with the following resources:

| Resource Type | Resource Name | Azure Region |
|---|---|---|
| Virtual Network | Vnet1 | UK South |
| Virtual Machine | Vm1 | UK South |
| Storage Account | Storage1 | UK South |
| Storage Account | Storage2 | UK South |

You need to meet the following requirements:

- Vm1 needs to securely connect to Storage1 over the Azure backbone network.
- Resources in Vnet1 can only connect to Storage1 and no other storage accounts.

---

## Q016:


Solution: You deploy Azure Front Door and create a custom rules engine rule.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not deploy Azure Front Door and create a custom rules engine rule. Azure Front Door is a global Layer 7 load-balancing service. Layer 7 refers to the Application layer of the Open Systems Interconnect model (OSI model). This can be useful if you have a number of virtual machines in different regions. Azure Front Door can be used to direct traffic (load balance) to the most appropriate virtual machine based on the source region of the end user. This ensures that the end user is always connecting to the closest virtual machine. Azure Front Door can be further customized by adding custom rules using the rules engine. This would not apply in this scenario as Azure Front Door is a service that is accessible from the internet. A rules engine rule can be used to redirect users to a mobile friendly website if the source device is a mobile.

---

### References

[What is Azure Front Door?](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview)  



---

## Q015:

Solution: You deploy a service endpoint and service endpoint policy.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. You should deploy a service endpoint and service endpoint policy. A service endpoint allows you to directly connect a subnet to a public Azure service such as storage accounts. This means that the virtual machine does not require an outbound connection to the internet, which is often a security concern. The relevant virtual network and subnet can then be associated to the storage account under the networking blade. This ensures that the first requirement is met, as Vm1 securely connects to the storage account over the Azure backbone network without making outgoing public calls via the internet. The secondary requirement is met by creating a service endpoint policy. If you create a service endpoint policy you can ensure that data exfiltration is not possible. For instance, during the service endpoint policy creation, you would need to ensure that you explicitly state that only Storage1 is accessible over the service endpoint. Access to other storage accounts will be denied from the subnet.

---

### References

[Virtual Network service endpoints](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview)  

[Virtual network service endpoint policies for Azure Storage](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoint-policies-overview)  

[Create, change, or delete service endpoint policy using the Azure portal](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoint-policies-portal)  

---

## Q014:

Solution: You deploy a private endpoint and Private Link service.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not deploy a private endpoint and Private Link service. A private endpoint allows you to completely isolate an Azure Platform as a Service (PaaS) service, such as a web app, so that it can only be contacted by an internal Azure resource. A private endpoint also allows traffic from on-premises networks to securely connect to the resource without traversing via the internet. This answer is not applicable for this scenario as the requirement does not state that private access from an on-premises network or virtual network is necessary. The scenario states that Vm1 needs to connect to Storage1 over the Azure backbone network only. For this reason, a private endpoint and private link service is an incorrect solution.

---

### References

[What is a private endpoint?](https://learn.microsoft.com/en-us/azure/private-link/private-endpoint-overview)  

---

## Q010-013:

You are the Azure administrator in your organization. A virtual network (VNet) with three subnets has been deployed with three virtual machines. A Site-to-Site VPN tunnel was also configured to connect Azure to the on-premises data center.
You have received reports of latency issues between on-premises clients and the Azure virtual machines. You run Network Watcher VPN diagnostics.

You need to analyze the ingress and egress bytes for the VPN connection.

---

## Q013:

Solution: You configure and analyze Network Security Group Flow Logs.
Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. You should not configure and analyze Network Security Group (NSG) Flow Logs. Network Security Group flow logs is an optional feature that comes bundled with Network Watcher. These logs will allow you to analyze network traffic that passes through a Network Security Group. This diagnostic test does not apply to the requirement as it specifically requests ingress and egress bytes for the VPN tunnel. This specifically relates to all data that passes through a given Network Security Group. Analyzing the ingress and egress data can be useful to verify whether data is actually reaching the Network Security Group in the first place.

---

### References

[Configuring Network Security Group Flow logs with PowerShell](https://learn.microsoft.com/en-us/azure/network-watcher/nsg-flow-logs-powershell)  

---

## Q012:

Solution: From Network Watcher, inspect the Connectiontats.txt file.
Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. From Network Watcher, you should inspect the 'ConnectionStats.txt' file. When you troubleshoot VPN connectivity, this file will contain statistics for the connection, which includes ingress and egress byte data.

---

### References


[Introduction to resource troubleshooting in Azure Network Watcher](https://learn.microsoft.com/en-us/azure/network-watcher/vpn-troubleshoot-overview)  

---

## Q011:

Solution: From Network Watcher, inspect the CPUStats.txt file.
Does this solution meet the goal?

---

### Answer:
No

---

### References

[Introduction to resource troubleshooting in Azure Network Watcher](https://learn.microsoft.com/en-us/azure/network-watcher/vpn-troubleshoot-overview)  

---

## Q010:

Solution: From Network Watcher, inspect the IKEErrors.txt file.
Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. From Network Watcher, you should not inspect the 'IKEErrors.txt' file. This file will only report issues and errors relating to the Internet Key Exchange (IKE) component of the VPN tunnel. The IKE process allows VPN peers at both ends to successfully encrypt and decrypt network packets traveling over the VPN tunnel, using a mutually agreed pre-shared key or certificate. This process consists of two phases: phase 1 and phase 2. Each phase uses encryption algorithms and keys. The IKEErrors.txt file will list any issues encountered during either phase initiation.

---

### References

[Introduction to resource troubleshooting in Azure Network Watcher](https://learn.microsoft.com/en-us/azure/network-watcher/vpn-troubleshoot-overview)  

---

## Q007-009:


![image info](./Q7_1.PNG)

Your company has the Azure environment shown in the Network Architecture exhibit.
The North US Windows user and the North US IOS user can only access VnetA.
You need to implement a solution that enables both users to access VnetB.

---

### References

[What is Azure Network Watcher?](https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-overview)  

[About BGP and VPN Gateway](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-bgp-overview)  

[How to configure BGP for Azure VPN Gateway](https://learn.microsoft.com/en-us/azure/vpn-gateway/bgp-howto)  

[About Point-to-Site VPN routing](https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-point-to-site-routing)  

---

## Q009:

Solution: re-download the VPN client configuration fpr the North US Windows user and the North US IOS user.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Downloading the VPN client configuration for users should only be done if the topology of a network is modified so that the changes of the topology can be implemented again to the client.

---

## Q008:

Solution: You use BGP on the gateway of VnetA.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. The Border Gateway Protocol (BGP) is the routing protocol for exchanging routing and reachability information between networks. When this protocol is used within VNets, it enables your Virtual Private Network (VPN) devices to exchange routes with your VPN gateways. BGP will tell the VPN gateways that the prefixes of the VPN devices are allowed to go through them.

---

## Q007:

Solution: Configure Azure Network Watcher

Does this solution meet the goal?

---

### Answer:
No

The solution does not meet the goal. Azure Network Watcher service enables you to monitor conditions at a network level in and from Azure. Configuring Azure Network Watcher will not allow both users to access VnetB.

---

### References

---

## Q004-006:


Your company has a virtual network VNet1 configured as shown in the exhibit with an address space of 10.1.0.0/16.
There are three subnets inside this virtual network:

• 10.1.1.0/24
• 10.1.2.0/24
• 10.1.3.0/24

The following resources are configured under these subnets:

| Virtual Machine | IP Address |
|-----------------|------------|
| VM1 | 10.1.1.9 |
| Proxy-VM | 10.1.2.9 |
| Backend Database | 10.1.3.9 |


No custom route table is attached to any of the subnets.
The VM1 is the front end server, where all the initial requests will be received from the public Internet users. The backend database is only reachable via the Proxy-VM.
VM1 wants to reach the backend database, but all the requests should proxy through the Proxy-VM configured in the subnet 10.1.2.0/24.

---

### References

[Network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview)  

[Virtual network traffic routing](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview)  

---

## Q006:

Solution: In order to relay all the traffic from VM1 via Proxy-VM, you enable the IP forwarding on the Proxy- VM virtual machine Virtual Network Interface under the IP configuration. You also configure a custom route table and attach it to the VM1 subnet. The route table is configured to route all the traffic to IP address 10.1.2.9/32 as the next hop address and the route type set to virtual appliance.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. You should enable the IP forwarding on the Proxy-VM virtual machine Virtual Network Interface under the IP configuration. You should also configure a custom route table and attach it to VM1 subnet. The route table should be configured to route all the traffic to IP address 10.1.2.9/32 as the next hop address and route type set to virtual appliance. With this set-up in place, all the traffic from VM1 will be routed to Proxy-VM, which will be then forwarded to the next hop as per the IP packet destination IP address


---

## Q005:

Solution: In order to relay all the traffic from VM1 via Proxy-VM, you create a Network Security Group (NSG), which allows the traffic from VM1 subnet to the Backend Database subnet.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Simply creating a Network Security Group (NSG) to allow traffic from VM1 subnet to the Backend Database subnet will not help in relaying the traffic via the Proxy-VM. The NSG is used to configure different security rules for the inbound and the outbound traffic, and you can associate a subnet or a network interface to it.

---

## Q004:

Solution: In order to relay all the traffic from VM1 via Proxy-VM, you enable IP Forwarding on the Backend database virtual machine, Virtual Network Interface.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Simply enabling the IP forwarding on the Backend Database virtual machine Virtual Network Interface will not force the VM1 to send all its traffic to Proxy-VM.

---

## Q001-003:

![image info](./Q1_1.PNG)
![image info](./Q1_2.PNG)
![image info](./Q1_3.PNG)


You have a private DNS Zone named az700.practice.com. You have two VNets, each running a Windows 10 virtual machine:

• Windows10 in Vnet1
• Windows10-2 in Vnet2

Each virtual machine only has private IP addresses. Refer to exhibits 1, 2, 3 and the table below for current
set-up details.

![image info](./Q1_0.PNG)

You discover that Windows10 in VNet1 cannot communicate with Windows10-2 in VNet2 using domain names.

You need to ensure that both virtual machines can communicate with each other using their corresponding private domain names.

---

### References

[Virtual network peering](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview)  

---


## Q003:

Solution: You create two virtual network links with the private DNS Zone for VNet1 and VNet2 with auto registration set to Enabled. Additionally, you assign a public IP address to each virtual machine network interface.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Just creating two virtual network links with the private DNS Zone for VNet1 and VNet2 with auto registration set to Enabled will not enable communication between the two virtual machines. Moreover, assigning public IP addresses to each virtual machine network interfaces will not help to enable communication between the virtual machines by using their private domain names. The public IP may help in accessing the virtual machine via the public internet, but it will not help in the private domain name resolution and reachability between the two virtual machines.

---

## Q002:

Solution: You create two virtual network links with the private DNS Zone for VNet1 and VNet2. Additionally, you also configure peering between VNet1 and VNet2.

Does this solution meet the goal?

---

### Answer:
Yes

This solution meets the goal. In order to enable inter-VNet communication, you need to configure virtual network peering between VNet1 and VNet2. The virtual network links with the private DNS Zone for VNet1 and VNet2 will enable hostname registration with the private zone. Once the virtual machine is created, the private IP will be automatically registered against the hostname in the private zone. To ensure actual connectivity between the virtual machines in different VNets, you need to configure peering between them.

---

## Q001:

Solution: 
You create two virtual network links with the private DNS Zone for VNet1 and VNet2 with auto registration set to Enabled.

Does this solution meet the goal?

---

### Answer:
No

This solution does not meet the goal. Just creating two virtual network links with the private DNS Zone for VNet1 and VNet2 with auto registration set to Enabled will not enable the communication between the two virtual machines. With this configuration, the hostname of the virtual machine will be automatically added to the private DNS Zone if the VM is spin up inside VNet1 or VNet2.

---